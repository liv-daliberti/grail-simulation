<!doctype html>
<html class="no-js" lang="en" data-content_root="../">
  <head><meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="../genindex.html"><link rel="search" title="Search" href="../search.html"><link rel="next" title="Prompt Builder API" href="prompt_builder.html"><link rel="prev" title="GRAIL Simulation Documentation" href="../index.html">

    <!-- Generated with Sphinx 8.2.3 and Furo 2025.09.25 -->
        <title>Clean Data Pipeline - GRAIL Simulation documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=d111a655" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo.css?v=580074bf" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/furo-extensions.css?v=8dab3a3b" />
    
    


<style>
  body {
    --color-code-background: #f2f2f2;
  --color-code-foreground: #1e1e1e;
  --color-brand-primary: #1f4b8e;
  --color-brand-content: #1f4b8e;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #8bbcef;
  --color-brand-content: #8bbcef;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  --color-brand-primary: #8bbcef;
  --color-brand-content: #8bbcef;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle site navigation sidebar">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc" aria-label="Toggle table of contents sidebar">
<label class="overlay sidebar-overlay" for="__navigation"></label>
<label class="overlay toc-overlay" for="__toc"></label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <span class="icon"><svg><use href="#svg-menu"></use></svg></span>
      </label>
    </div>
    <div class="header-center">
      <a href="../index.html"><div class="brand">GRAIL Simulation  documentation</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="../index.html">
  
  <span class="sidebar-brand-text">GRAIL Simulation  documentation</span>
  
</a><form class="sidebar-search-container" method="get" action="../search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Clean Data Pipeline</a></li>
<li class="toctree-l1"><a class="reference internal" href="prompt_builder.html">Prompt Builder API</a></li>
<li class="toctree-l1"><a class="reference internal" href="knn.html">KNN Baseline API</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpt4o.html">GPT-4o Tools API</a></li>
<li class="toctree-l1"><a class="reference internal" href="open_r1.html">Open-R1 Training API</a></li>
<li class="toctree-l1"><a class="reference internal" href="xgb.html">XGBoost Baseline API</a></li>
<li class="toctree-l1"><a class="reference internal" href="visualization.html">Visualization Utilities</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="../_sources/api/clean_data.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle" aria-label="Toggle Light / Dark / Auto color theme">
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <span class="icon"><svg><use href="#svg-toc"></use></svg></span>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="clean-data-pipeline">
<h1>Clean Data Pipeline<a class="headerlink" href="#clean-data-pipeline" title="Link to this heading">¶</a></h1>
<p>The <a class="reference internal" href="#module-clean_data" title="clean_data"><code class="xref py py-mod docutils literal notranslate"><span class="pre">clean_data</span></code></a> package houses the ingestion, filtering, and
statistics tooling used to prepare GRAIL sessions for downstream
modeling.  Use the modules below to explore the CLI entry points,
helpers, and prompt-specific utilities.</p>
<section id="module-clean_data">
<span id="core-modules"></span><h2>Core Modules<a class="headerlink" href="#module-clean_data" title="Link to this heading">¶</a></h2>
<p>Convenience imports for the reusable GRAIL cleaning pipeline.</p>
<p>Importing <a class="reference internal" href="#module-clean_data" title="clean_data"><code class="xref py py-mod docutils literal notranslate"><span class="pre">clean_data</span></code></a> exposes the key builder entry points and
provides a discoverable namespace for the prompt analytics subpackage.
Most consumers will interact with <a class="reference internal" href="#clean_data.clean_data.build_clean_dataset" title="clean_data.clean_data.build_clean_dataset"><code class="xref py py-func docutils literal notranslate"><span class="pre">clean_data.clean_data.build_clean_dataset()</span></code></a>
or <a class="reference internal" href="#clean_data.clean_data.generate_prompt_stats" title="clean_data.clean_data.generate_prompt_stats"><code class="xref py py-func docutils literal notranslate"><span class="pre">clean_data.clean_data.generate_prompt_stats()</span></code></a>.</p>
<p id="module-clean_data.clean_data">Top-level orchestration helpers for the <code class="docutils literal notranslate"><span class="pre">clean_data</span></code> package.</p>
<p>This module stitches together the key pieces of the cleaning pipeline:
loading raw CodeOcean or Hugging Face datasets, filtering unusable rows,
converting interactions into prompt-ready examples, validating schema
requirements, saving artifacts, and dispatching prompt statistics reports.
It is the public surface that downstream tooling should import when they
need to build or persist cleaned prompt datasets.</p>
<dl class="py class">
<dt class="sig sig-object py" id="clean_data.clean_data.BuildOptions">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">clean_data.clean_data.</span></span><span class="sig-name descname"><span class="pre">BuildOptions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">validation_ratio</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_split</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'train'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validation_split</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'validation'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">system_prompt</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sol_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_history</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">12</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/clean_data.html#BuildOptions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.clean_data.BuildOptions" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Configuration used when building cleaned prompt datasets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>validation_ratio</strong> (<em>float</em>)</p></li>
<li><p><strong>train_split</strong> (<em>str</em>)</p></li>
<li><p><strong>validation_split</strong> (<em>str</em>)</p></li>
<li><p><strong>system_prompt</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>sol_key</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
<li><p><strong>max_history</strong> (<em>int</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.clean_data.BuildOptions.max_history">
<span class="sig-name descname"><span class="pre">max_history</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">int</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">12</span></em><a class="headerlink" href="#clean_data.clean_data.BuildOptions.max_history" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.clean_data.BuildOptions.sol_key">
<span class="sig-name descname"><span class="pre">sol_key</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#clean_data.clean_data.BuildOptions.sol_key" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.clean_data.BuildOptions.system_prompt">
<span class="sig-name descname"><span class="pre">system_prompt</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">None</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">None</span></em><a class="headerlink" href="#clean_data.clean_data.BuildOptions.system_prompt" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.clean_data.BuildOptions.train_split">
<span class="sig-name descname"><span class="pre">train_split</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'train'</span></em><a class="headerlink" href="#clean_data.clean_data.BuildOptions.train_split" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.clean_data.BuildOptions.validation_ratio">
<span class="sig-name descname"><span class="pre">validation_ratio</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">float</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">0.1</span></em><a class="headerlink" href="#clean_data.clean_data.BuildOptions.validation_ratio" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.clean_data.BuildOptions.validation_split">
<span class="sig-name descname"><span class="pre">validation_split</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">'validation'</span></em><a class="headerlink" href="#clean_data.clean_data.BuildOptions.validation_split" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.clean_data.build_clean_dataset">
<span class="sig-prename descclassname"><span class="pre">clean_data.clean_data.</span></span><span class="sig-name descname"><span class="pre">build_clean_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset_name</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">options</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/clean_data.html#build_clean_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.clean_data.build_clean_dataset" title="Link to this definition">¶</a></dt>
<dd><p>Produce cleaned prompt examples from a raw dataset source.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset_name</strong> (<em>str</em>) – Path or dataset identifier understood by <a class="reference internal" href="#clean_data.clean_data.load_raw" title="clean_data.clean_data.load_raw"><code class="xref py py-func docutils literal notranslate"><span class="pre">load_raw()</span></code></a>.</p></li>
<li><p><strong>options</strong> (<a class="reference internal" href="#clean_data.clean_data.BuildOptions" title="clean_data.clean_data.BuildOptions"><em>BuildOptions</em></a><em> | </em><em>None</em>) – Optional overrides controlling split names and prompt construction.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Cleaned dataset containing <code class="docutils literal notranslate"><span class="pre">train</span></code> and optional <code class="docutils literal notranslate"><span class="pre">validation</span></code> splits.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>datasets.DatasetDict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.clean_data.dedupe_by_participant_issue">
<span class="sig-prename descclassname"><span class="pre">clean_data.clean_data.</span></span><span class="sig-name descname"><span class="pre">dedupe_by_participant_issue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/clean_data.html#dedupe_by_participant_issue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.clean_data.dedupe_by_participant_issue" title="Link to this definition">¶</a></dt>
<dd><p>Drop duplicate rows sharing the same participant and issue.</p>
<p>The cleaning pipeline now retains every interaction row long enough to
run prompt diagnostics (e.g., prior-history coverage).  Downstream
consumers that require the historical one-row-per-participant-and-issue
view can apply this helper to recover the previous behaviour.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dataset</strong> (<em>datasets.DatasetDict</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>datasets.DatasetDict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.clean_data.ensure_shared_schema">
<span class="sig-prename descclassname"><span class="pre">clean_data.clean_data.</span></span><span class="sig-name descname"><span class="pre">ensure_shared_schema</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">datasets_map</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/clean_data.html#ensure_shared_schema"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.clean_data.ensure_shared_schema" title="Link to this definition">¶</a></dt>
<dd><p>Align feature schemas across splits so they expose identical columns.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>datasets_map</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>datasets.Dataset</em><em>]</em>) – Mapping of split name to dataset requiring schema alignment.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>New mapping with each split cast to the union of all features.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>Dict</em>[str, datasets.Dataset]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.clean_data.export_issue_datasets">
<span class="sig-prename descclassname"><span class="pre">clean_data.clean_data.</span></span><span class="sig-name descname"><span class="pre">export_issue_datasets</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">issue_repo_map</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">push_to_hub</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">False</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">hub_token</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/clean_data.html#export_issue_datasets"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.clean_data.export_issue_datasets" title="Link to this definition">¶</a></dt>
<dd><p>Write per-issue dataset subsets (and optionally push them to the hub).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> (<em>datasets.DatasetDict</em>) – Cleaned dataset keyed by split.</p></li>
<li><p><strong>output_dir</strong> (<em>Path</em><em> | </em><em>str</em>) – Base directory where issue-specific datasets will be written.</p></li>
<li><p><strong>issue_repo_map</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>str</em><em>]</em>) – Mapping from issue name to Hugging Face repository id.</p></li>
<li><p><strong>push_to_hub</strong> (<em>bool</em>) – When <code class="docutils literal notranslate"><span class="pre">True</span></code>, push each subset to its configured repository.</p></li>
<li><p><strong>hub_token</strong> (<em>str</em><em> | </em><em>None</em>) – Authentication token used for Hugging Face uploads.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.clean_data.generate_prompt_stats">
<span class="sig-prename descclassname"><span class="pre">clean_data.clean_data.</span></span><span class="sig-name descname"><span class="pre">generate_prompt_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_dir</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_split</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'train'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validation_split</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'validation'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/clean_data.html#generate_prompt_stats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.clean_data.generate_prompt_stats" title="Link to this definition">¶</a></dt>
<dd><p>Render summary statistics and figures for a cleaned dataset.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> (<em>datasets.DatasetDict</em>) – Dataset containing cleaned prompt rows.</p></li>
<li><p><strong>output_dir</strong> (<em>Path</em><em> | </em><em>str</em>) – Directory where plots and Markdown summaries will be written.</p></li>
<li><p><strong>train_split</strong> (<em>str</em>) – Name of the training split in <code class="docutils literal notranslate"><span class="pre">dataset</span></code>.</p></li>
<li><p><strong>validation_split</strong> (<em>str</em>) – Name of the validation split in <code class="docutils literal notranslate"><span class="pre">dataset</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ImportError</strong> – If the prompt reporting extras are not installed.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.clean_data.load_raw">
<span class="sig-prename descclassname"><span class="pre">clean_data.clean_data.</span></span><span class="sig-name descname"><span class="pre">load_raw</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validation_ratio</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/clean_data.html#load_raw"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.clean_data.load_raw" title="Link to this definition">¶</a></dt>
<dd><p>Load raw prompt data from disk or the Hugging Face Hub.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset_name</strong> (<em>str</em>) – Local filesystem path, CodeOcean capsule directory, or dataset id.</p></li>
<li><p><strong>validation_ratio</strong> (<em>float</em>) – Validation share used when rebuilding from a capsule directory.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Hugging Face <code class="docutils literal notranslate"><span class="pre">DatasetDict</span></code> containing the available splits.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If the provided file path has an unsupported extension.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>datasets.DatasetDict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.clean_data.map_rows_to_examples">
<span class="sig-prename descclassname"><span class="pre">clean_data.clean_data.</span></span><span class="sig-name descname"><span class="pre">map_rows_to_examples</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">system_prompt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sol_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_history</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/clean_data.html#map_rows_to_examples"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.clean_data.map_rows_to_examples" title="Link to this definition">¶</a></dt>
<dd><p>Convert interaction rows into cleaned prompt examples.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> (<em>datasets.DatasetDict</em>) – Source datasets keyed by split.</p></li>
<li><p><strong>system_prompt</strong> (<em>str</em><em> | </em><em>None</em>) – Optional system prompt override applied to every row.</p></li>
<li><p><strong>sol_key</strong> (<em>str</em><em> | </em><em>None</em>) – Alternate column containing the gold next-video identifier.</p></li>
<li><p><strong>max_history</strong> (<em>int</em>) – Maximum number of prior interactions to embed in <code class="docutils literal notranslate"><span class="pre">state_text</span></code>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dataset mapping where each split has been converted to prompt-ready rows.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>datasets.DatasetDict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.clean_data.parse_issue_repo_specs">
<span class="sig-prename descclassname"><span class="pre">clean_data.clean_data.</span></span><span class="sig-name descname"><span class="pre">parse_issue_repo_specs</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">specs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/clean_data.html#parse_issue_repo_specs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.clean_data.parse_issue_repo_specs" title="Link to this definition">¶</a></dt>
<dd><p>Parse CLI <code class="docutils literal notranslate"><span class="pre">issue=repo</span></code> assignments into a mapping.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>specs</strong> (<em>list</em><em>[</em><em>str</em><em>] </em><em>| </em><em>None</em>) – Iterable of <code class="docutils literal notranslate"><span class="pre">issue=repo</span></code> strings provided on the command line.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Mapping of normalized issue name to repository identifier.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If any entry is malformed.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Dict</em>[str, str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.clean_data.save_dataset">
<span class="sig-prename descclassname"><span class="pre">clean_data.clean_data.</span></span><span class="sig-name descname"><span class="pre">save_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_dir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/clean_data.html#save_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.clean_data.save_dataset" title="Link to this definition">¶</a></dt>
<dd><p>Persist a cleaned dataset to disk using <code class="docutils literal notranslate"><span class="pre">Dataset.save_to_disk</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> (<em>datasets.DatasetDict</em>) – Dataset to save.</p></li>
<li><p><strong>output_dir</strong> (<em>Path</em><em> | </em><em>str</em>) – Destination directory that will be created if necessary.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.clean_data.validate_required_columns">
<span class="sig-prename descclassname"><span class="pre">clean_data.clean_data.</span></span><span class="sig-name descname"><span class="pre">validate_required_columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/clean_data.html#validate_required_columns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.clean_data.validate_required_columns" title="Link to this definition">¶</a></dt>
<dd><p>Validate that every split exposes the GRPO-required prompt columns.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dataset</strong> (<em>datasets.DatasetDict</em>) – Dataset to inspect.</p>
</dd>
<dt class="field-even">Raises<span class="colon">:</span></dt>
<dd class="field-even"><p><strong>ValueError</strong> – If any required column is missing from a split.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<p id="module-clean_data.cli">Command-line entry point that ties together the cleaning workflow.</p>
<p>The CLI parses user arguments, configures <a class="reference internal" href="#module-clean_data.clean_data" title="clean_data.clean_data"><code class="xref py py-mod docutils literal notranslate"><span class="pre">clean_data.clean_data</span></code></a>
options, orchestrates dataset construction, kicks off prompt analytics,
and handles optional issue-level exports.  It mirrors the behaviour of the
original CodeOcean pipeline while exposing a Python-first interface.</p>
<dl class="py function">
<dt class="sig sig-object py" id="clean_data.cli.main">
<span class="sig-prename descclassname"><span class="pre">clean_data.cli.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">argv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/cli.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.cli.main" title="Link to this definition">¶</a></dt>
<dd><p>Entry point invoked by the CLI scripts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>argv</strong> (<em>list</em><em>[</em><em>str</em><em>] </em><em>| </em><em>None</em>) – Optional command-line argument list.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.cli.parse_args">
<span class="sig-prename descclassname"><span class="pre">clean_data.cli.</span></span><span class="sig-name descname"><span class="pre">parse_args</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">argv</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/cli.html#parse_args"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.cli.parse_args" title="Link to this definition">¶</a></dt>
<dd><p>Parse command-line arguments.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>argv</strong> (<em>list</em><em>[</em><em>str</em><em>] </em><em>| </em><em>None</em>) – Optional list of command-line arguments. When <code class="docutils literal notranslate"><span class="pre">None</span></code> the
values are read from <code class="xref py py-data docutils literal notranslate"><span class="pre">sys.argv</span></code>.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Parsed <code class="xref py py-class docutils literal notranslate"><span class="pre">argparse.Namespace</span></code> with CLI options.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>Namespace</em></p>
</dd>
</dl>
</dd></dl>

<p id="module-clean_data.codeocean">Façade for rebuilding datasets directly from the CodeOcean capsule.</p>
<p>The functions here provide a tiny shim around <a class="reference internal" href="#module-clean_data.sessions" title="clean_data.sessions"><code class="xref py py-mod docutils literal notranslate"><span class="pre">clean_data.sessions</span></code></a>,
exposing compatibility helpers that take a capsule path, rebuild the
interaction dataframe, split it into train/validation splits, and surface
the optional <cite>resolve_capsule_data_root</cite> convenience used by the CLI.
Anything that needs to ingest the raw CodeOcean export should go through
this module rather than re-parsing the capsule tree.</p>
<dl class="py function">
<dt class="sig sig-object py" id="clean_data.codeocean.build_codeocean_rows">
<span class="sig-prename descclassname"><span class="pre">clean_data.codeocean.</span></span><span class="sig-name descname"><span class="pre">build_codeocean_rows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_root</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/sessions.html#build_codeocean_rows"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.codeocean.build_codeocean_rows" title="Link to this definition">¶</a></dt>
<dd><p>Construct the full interaction dataframe from raw CodeOcean assets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data_root</strong> (<em>Path</em>) – Capsule <code class="docutils literal notranslate"><span class="pre">data</span></code> directory.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dataframe containing per-decision rows suitable for prompt building.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.codeocean.load_codeocean_dataset">
<span class="sig-prename descclassname"><span class="pre">clean_data.codeocean.</span></span><span class="sig-name descname"><span class="pre">load_codeocean_dataset</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset_name</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validation_ratio</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/codeocean.html#load_codeocean_dataset"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.codeocean.load_codeocean_dataset" title="Link to this definition">¶</a></dt>
<dd><p>Build Hugging Face datasets from a CodeOcean capsule directory.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset_name</strong> (<em>str</em>) – Filesystem path to the capsule root or its <code class="docutils literal notranslate"><span class="pre">data</span></code> directory.</p></li>
<li><p><strong>validation_ratio</strong> (<em>float</em>) – Proportion of rows assigned to the validation split.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dataset dictionary containing the constructed splits.</p>
</dd>
<dt class="field-odd">Raises<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ValueError</strong> – If the capsule structure is missing or no usable rows exist.</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>datasets.DatasetDict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.codeocean.resolve_capsule_data_root">
<span class="sig-prename descclassname"><span class="pre">clean_data.codeocean.</span></span><span class="sig-name descname"><span class="pre">resolve_capsule_data_root</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/codeocean.html#resolve_capsule_data_root"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.codeocean.resolve_capsule_data_root" title="Link to this definition">¶</a></dt>
<dd><p>Expose the IO helper under the codeocean namespace for compatibility.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<em>Path</em>) – Candidate path to the capsule root or the nested <code class="docutils literal notranslate"><span class="pre">data</span></code> directory.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Normalized capsule root when detected, otherwise <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>Path</em> | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.codeocean.split_dataframe">
<span class="sig-prename descclassname"><span class="pre">clean_data.codeocean.</span></span><span class="sig-name descname"><span class="pre">split_dataframe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validation_ratio</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/sessions.html#split_dataframe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.codeocean.split_dataframe" title="Link to this definition">¶</a></dt>
<dd><p>Split dataframe into train/validation partitions grouped by participant.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Interaction dataframe to split.</p></li>
<li><p><strong>validation_ratio</strong> (<em>float</em>) – Fraction of participant groups assigned to validation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Mapping containing <code class="docutils literal notranslate"><span class="pre">train</span></code> and optional <code class="docutils literal notranslate"><span class="pre">validation</span></code> dataframes.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>Dict</em>[str, pandas.DataFrame]</p>
</dd>
</dl>
</dd></dl>

<p id="module-clean_data.filters">Row-level filters and quick aggregate reporting utilities.</p>
<p>This module contains the lightweight predicates used to discard unusable
interaction rows before prompt construction as well as diagnostic helpers
that summarise the issue distribution across splits.  These functions are
intended to be composed by <a class="reference internal" href="#module-clean_data.clean_data" title="clean_data.clean_data"><code class="xref py py-mod docutils literal notranslate"><span class="pre">clean_data.clean_data</span></code></a> and higher-level
entry points rather than imported by downstream consumers directly.</p>
<dl class="py function">
<dt class="sig sig-object py" id="clean_data.filters.compute_issue_counts">
<span class="sig-prename descclassname"><span class="pre">clean_data.filters.</span></span><span class="sig-name descname"><span class="pre">compute_issue_counts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/filters.html#compute_issue_counts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.filters.compute_issue_counts" title="Link to this definition">¶</a></dt>
<dd><p>Summarize issue/category distributions for logging.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dataset</strong> (<em>datasets.DatasetDict</em>) – Dataset containing an <code class="docutils literal notranslate"><span class="pre">issue</span></code> column for each split.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Nested mapping of split name -&gt; issue label -&gt; count.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>Dict</em>[str, <em>Dict</em>[str, int]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.filters.filter_prompt_ready">
<span class="sig-prename descclassname"><span class="pre">clean_data.filters.</span></span><span class="sig-name descname"><span class="pre">filter_prompt_ready</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sol_key</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/filters.html#filter_prompt_ready"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.filters.filter_prompt_ready" title="Link to this definition">¶</a></dt>
<dd><p>Drop rows that cannot produce a valid prompt/example.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> (<em>datasets.DatasetDict</em>) – Input dataset keyed by split.</p></li>
<li><p><strong>sol_key</strong> (<em>str</em><em> | </em><em>None</em>) – Alternate gold-id column used to validate the target choice.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dataset dictionary with non-compliant rows removed.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>datasets.DatasetDict</p>
</dd>
</dl>
</dd></dl>

<p id="module-clean_data.helpers">Common low-level helpers reused across the cleaning pipeline.</p>
<p>This module holds normalization routines, regex utilities, and shared
constants that power session parsing, prompt construction, and survey
processing.  Anything that manipulates identifiers, serialised JSON, or
core feature definitions typically lives here to avoid circular imports
between the higher-level modules.</p>
<p id="module-clean_data.io">Input/output primitives for ingesting capsule artifacts and metadata.</p>
<p>The functions in this module know how to locate capsule directories,
read CSV/RDS exports from the CodeOcean bundle, parse supplemental
metadata, and normalise the resulting structures for downstream use.
They form the foundation upon which the session parser reconstructs the
full interaction dataset.</p>
<dl class="py function">
<dt class="sig sig-object py" id="clean_data.io.assign_if_missing">
<span class="sig-prename descclassname"><span class="pre">clean_data.io.</span></span><span class="sig-name descname"><span class="pre">assign_if_missing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">info</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/io.html#assign_if_missing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.io.assign_if_missing" title="Link to this definition">¶</a></dt>
<dd><p>Populate <code class="docutils literal notranslate"><span class="pre">info[key]</span></code> when the destination field is empty or placeholder.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>info</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – Metadata dictionary that may contain an existing value.</p></li>
<li><p><strong>key</strong> (<em>str</em>) – Target key within <code class="docutils literal notranslate"><span class="pre">info</span></code>.</p></li>
<li><p><strong>value</strong> (<em>Any</em>) – Candidate value to assign.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.io.augment_metadata_from_supplemental">
<span class="sig-prename descclassname"><span class="pre">clean_data.io.</span></span><span class="sig-name descname"><span class="pre">augment_metadata_from_supplemental</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">meta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_dir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/io.html#augment_metadata_from_supplemental"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.io.augment_metadata_from_supplemental" title="Link to this definition">¶</a></dt>
<dd><p>Enrich the metadata index with supplemental CSV content.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>meta</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>]</em>) – Existing metadata mapping keyed by video id.</p></li>
<li><p><strong>base_dir</strong> (<em>Path</em>) – Capsule base directory containing the supplemental bundle.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.io.fill_metadata_field">
<span class="sig-prename descclassname"><span class="pre">clean_data.io.</span></span><span class="sig-name descname"><span class="pre">fill_metadata_field</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">info</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">row</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">candidate_columns</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/io.html#fill_metadata_field"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.io.fill_metadata_field" title="Link to this definition">¶</a></dt>
<dd><p>Populate <code class="docutils literal notranslate"><span class="pre">info[key]</span></code> from the first valid entry in <code class="docutils literal notranslate"><span class="pre">candidate_columns</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>info</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – Metadata dictionary receiving the value.</p></li>
<li><p><strong>row</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – Row containing potential field values.</p></li>
<li><p><strong>key</strong> (<em>str</em>) – Target metadata key to populate.</p></li>
<li><p><strong>candidate_columns</strong> (<em>str</em>) – Ordered list of column names to inspect.</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.io.load_recommendation_tree_metadata">
<span class="sig-prename descclassname"><span class="pre">clean_data.io.</span></span><span class="sig-name descname"><span class="pre">load_recommendation_tree_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_dir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/io.html#load_recommendation_tree_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.io.load_recommendation_tree_metadata" title="Link to this definition">¶</a></dt>
<dd><p>Scan recommendation tree CSVs to build a metadata index keyed by video id.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>base_dir</strong> (<em>Path</em>) – Capsule base directory containing the tree exports.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple of (metadata mapping, issue map) derived from the tree CSVs.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>Tuple</em>[<em>Dict</em>[str, <em>Dict</em>[str, <em>Any</em>]], <em>Dict</em>[str, str]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.io.load_shorts_sessions">
<span class="sig-prename descclassname"><span class="pre">clean_data.io.</span></span><span class="sig-name descname"><span class="pre">load_shorts_sessions</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_root</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/io.html#load_shorts_sessions"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.io.load_shorts_sessions" title="Link to this definition">¶</a></dt>
<dd><p>Load Shorts (Study 4) interaction logs from the YTRecs RDS export.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data_root</strong> (<em>Path</em>) – Capsule <code class="docutils literal notranslate"><span class="pre">data</span></code> directory.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>List of normalized session dictionaries.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>List</em>[<em>Dict</em>[str, <em>Any</em>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.io.load_video_metadata">
<span class="sig-prename descclassname"><span class="pre">clean_data.io.</span></span><span class="sig-name descname"><span class="pre">load_video_metadata</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">base_dir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/io.html#load_video_metadata"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.io.load_video_metadata" title="Link to this definition">¶</a></dt>
<dd><p>Load supplemental video titles from the metadata bundle.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>base_dir</strong> (<em>Path</em>) – Capsule base directory containing supplemental metadata.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Mapping of canonical video id to title string.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>Dict</em>[str, str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.io.maybe_literal_eval">
<span class="sig-prename descclassname"><span class="pre">clean_data.io.</span></span><span class="sig-name descname"><span class="pre">maybe_literal_eval</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/io.html#maybe_literal_eval"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.io.maybe_literal_eval" title="Link to this definition">¶</a></dt>
<dd><p>Convert stringified lists/dicts/bools from R exports into native objects.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>value</strong> (<em>Any</em>) – Raw value emitted by the R exports.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Parsed Python value or the original value when parsing fails.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>Any</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.io.read_csv_if_exists">
<span class="sig-prename descclassname"><span class="pre">clean_data.io.</span></span><span class="sig-name descname"><span class="pre">read_csv_if_exists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/io.html#read_csv_if_exists"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.io.read_csv_if_exists" title="Link to this definition">¶</a></dt>
<dd><p>Read a CSV file into a dataframe, returning empty on failure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<em>Path</em>) – Absolute or relative CSV path.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dataframe containing the file contents, or empty when unavailable.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.io.read_rds_dataframe">
<span class="sig-prename descclassname"><span class="pre">clean_data.io.</span></span><span class="sig-name descname"><span class="pre">read_rds_dataframe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/io.html#read_rds_dataframe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.io.read_rds_dataframe" title="Link to this definition">¶</a></dt>
<dd><p>Convert an RDS file into a dataframe via <code class="docutils literal notranslate"><span class="pre">Rscript</span></code>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<em>Path</em>) – Location of the <code class="docutils literal notranslate"><span class="pre">.rds</span></code> file.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Parsed dataframe or empty dataframe when conversion fails.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.io.read_survey_with_fallback">
<span class="sig-prename descclassname"><span class="pre">clean_data.io.</span></span><span class="sig-name descname"><span class="pre">read_survey_with_fallback</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">candidates</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/io.html#read_survey_with_fallback"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.io.read_survey_with_fallback" title="Link to this definition">¶</a></dt>
<dd><p>Return the first survey export that includes a <code class="docutils literal notranslate"><span class="pre">urlid</span></code> column.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>candidates</strong> (<em>Path</em>) – Ordered sequence of candidate paths.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dataframe of the first usable survey export, or empty when none exist.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.io.resolve_capsule_data_root">
<span class="sig-prename descclassname"><span class="pre">clean_data.io.</span></span><span class="sig-name descname"><span class="pre">resolve_capsule_data_root</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/io.html#resolve_capsule_data_root"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.io.resolve_capsule_data_root" title="Link to this definition">¶</a></dt>
<dd><p>Locate the CodeOcean capsule root or <code class="docutils literal notranslate"><span class="pre">data</span></code> directory from a user path.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<em>Path</em>) – Candidate path provided by the caller.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Normalized capsule root if detected, otherwise <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>Path</em> | None</p>
</dd>
</dl>
</dd></dl>

<p id="module-clean_data.prompting">Core prompt construction logic for the cleaned GRAIL dataset.</p>
<p>This module converts the normalized session rows into structured prompt
examples: resolving slate items, synthesising system/user messages,
tracking passthrough metadata, and enforcing GRPO column requirements.
Other modules feed raw data into these helpers when building cleaned
datasets or inspecting individual examples.</p>
<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompting.get_gold_next_id">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompting.</span></span><span class="sig-name descname"><span class="pre">get_gold_next_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ex</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sol_key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompting.html#get_gold_next_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompting.get_gold_next_id" title="Link to this definition">¶</a></dt>
<dd><p>Resolve the gold next-video id for a session step.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ex</strong> (<em>dict</em>) – Session row being transformed.</p></li>
<li><p><strong>sol_key</strong> (<em>str</em><em> | </em><em>None</em>) – Optional alternate column name containing the gold id.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Canonical next-video id or an empty string when unavailable.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompting.gold_index_from_items">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompting.</span></span><span class="sig-name descname"><span class="pre">gold_index_from_items</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gold</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">items</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompting.html#gold_index_from_items"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompting.gold_index_from_items" title="Link to this definition">¶</a></dt>
<dd><p>Locate the 1-based index of <code class="docutils literal notranslate"><span class="pre">gold</span></code> inside the slate items list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>gold</strong> (<em>str</em>) – Gold video id (canonical string).</p></li>
<li><p><strong>items</strong> (<em>List</em><em>[</em><em>dict</em><em>]</em>) – Slate items pulled from the session log.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Index in <code class="docutils literal notranslate"><span class="pre">items</span></code> or <code class="docutils literal notranslate"><span class="pre">-1</span></code> when the id cannot be matched.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompting.load_slate_items">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompting.</span></span><span class="sig-name descname"><span class="pre">load_slate_items</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ex</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompting.html#load_slate_items"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompting.load_slate_items" title="Link to this definition">¶</a></dt>
<dd><p>Parse <code class="docutils literal notranslate"><span class="pre">slate_items_json</span></code> into a list of dictionaries with <code class="docutils literal notranslate"><span class="pre">title</span></code> and <code class="docutils literal notranslate"><span class="pre">id</span></code> keys.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ex</strong> (<em>dict</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>List</em>[dict]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompting.row_to_example">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompting.</span></span><span class="sig-name descname"><span class="pre">row_to_example</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ex</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">system_prompt</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sol_key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">max_hist</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompting.html#row_to_example"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompting.row_to_example" title="Link to this definition">¶</a></dt>
<dd><p>Transform a raw session pair into the cleaned GRPO example structure.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ex</strong> (<em>dict</em>) – Interaction row produced during session processing.</p></li>
<li><p><strong>system_prompt</strong> (<em>str</em><em> | </em><em>None</em>) – Optional system prompt override.</p></li>
<li><p><strong>sol_key</strong> (<em>str</em><em> | </em><em>None</em>) – Alternate column to treat as the gold next-video id.</p></li>
<li><p><strong>max_hist</strong> (<em>int</em>) – Maximum number of prior history entries to render.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Cleaned example dictionary or <code class="docutils literal notranslate"><span class="pre">None</span></code> when the row is unusable.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>dict | None</p>
</dd>
</dl>
</dd></dl>

<p id="module-clean_data.prompt_constants">Canonical feature groups and labels used by the prompt analytics tools.</p>
<p>This module defines the feature taxonomy consumed by the plotting and
summary code under <a class="reference internal" href="#module-clean_data.prompt" title="clean_data.prompt"><code class="xref py py-mod docutils literal notranslate"><span class="pre">clean_data.prompt</span></code></a>.  Keeping the mapping in one
place ensures the CLI, reporting scripts, and documentation highlight the
same viewer attributes and survey responses.</p>
<p id="module-clean_data.prompt_stats">Thin wrapper that mirrors the legacy prompt statistics entry point.</p>
<p>Historically the prompt reporting lived in this script; during the module
split we kept the file so downstream tooling could continue invoking it.
The implementation now simply delegates to <a class="reference internal" href="#module-clean_data.prompt.cli" title="clean_data.prompt.cli"><code class="xref py py-mod docutils literal notranslate"><span class="pre">clean_data.prompt.cli</span></code></a>.</p>
<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt_stats.generate_prompt_feature_report">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt_stats.</span></span><span class="sig-name descname"><span class="pre">generate_prompt_feature_report</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt.html#generate_prompt_feature_report"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt_stats.generate_prompt_feature_report" title="Link to this definition">¶</a></dt>
<dd><p>Delegate to <a class="reference internal" href="#clean_data.prompt.cli.generate_prompt_feature_report" title="clean_data.prompt.cli.generate_prompt_feature_report"><code class="xref py py-func docutils literal notranslate"><span class="pre">clean_data.prompt.cli.generate_prompt_feature_report()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<em>Any</em>)</p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Any</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt_stats.main">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt_stats.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt_stats.main" title="Link to this definition">¶</a></dt>
<dd><p>Delegate to <a class="reference internal" href="#clean_data.prompt.cli.main" title="clean_data.prompt.cli.main"><code class="xref py py-func docutils literal notranslate"><span class="pre">clean_data.prompt.cli.main()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<em>Any</em>)</p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Any</em></p>
</dd>
</dl>
</dd></dl>

<p id="module-clean_data.sessions">Session log parsing and feature engineering for CodeOcean exports.</p>
<p>Here we translate the raw capsule sessions into the intermediate dataframe
used by <a class="reference internal" href="#module-clean_data.clean_data" title="clean_data.clean_data"><code class="xref py py-mod docutils literal notranslate"><span class="pre">clean_data.clean_data</span></code></a>: loading survey allow-lists, merging
per-video metadata, enforcing participant filters, and emitting one row per
viewer decision.  It is the heaviest module in the package and underpins
both the CLI and the high-level build functions.</p>
<dl class="py class">
<dt class="sig sig-object py" id="clean_data.sessions.AllowlistState">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">clean_data.sessions.</span></span><span class="sig-name descname"><span class="pre">AllowlistState</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gun_workers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wage_study2_workers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wage_study3_caseids</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wage_study4_workers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wage_study2_urlids</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">wage_study4_urlids</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/sessions.html#AllowlistState"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.sessions.AllowlistState" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Participant allowlist configuration derived from survey exports.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>gun_workers</strong> (<em>Set</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>wage_study2_workers</strong> (<em>Set</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>wage_study3_caseids</strong> (<em>Set</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>wage_study4_workers</strong> (<em>Set</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>wage_study2_urlids</strong> (<em>Set</em><em>[</em><em>str</em><em>]</em>)</p></li>
<li><p><strong>wage_study4_urlids</strong> (<em>Set</em><em>[</em><em>str</em><em>]</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="clean_data.sessions.AllowlistState.classify_wage_candidate">
<span class="sig-name descname"><span class="pre">classify_wage_candidate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">urlid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">worker_candidate</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">case_candidate</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/sessions.html#AllowlistState.classify_wage_candidate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.sessions.AllowlistState.classify_wage_candidate" title="Link to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">(study_label,</span> <span class="pre">participant_token,</span> <span class="pre">valid)</span></code> for minimum wage topics.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>urlid</strong> (<em>str</em>) – Normalized URL identifier for the session.</p></li>
<li><p><strong>worker_candidate</strong> (<em>str</em>) – Candidate worker identifier extracted from surveys.</p></li>
<li><p><strong>case_candidate</strong> (<em>str</em>) – Candidate case identifier extracted from surveys.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple containing the resolved study label, identity token, and validity flag.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>Tuple</em>[str, str | None, bool]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clean_data.sessions.AllowlistState.from_mapping">
<em class="property"><span class="k"><span class="pre">classmethod</span></span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">from_mapping</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mapping</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/sessions.html#AllowlistState.from_mapping"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.sessions.AllowlistState.from_mapping" title="Link to this definition">¶</a></dt>
<dd><p>Create an allowlist state from the nested mapping used on disk.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Set</em><em>[</em><em>str</em><em>]</em><em>]</em><em>]</em>) – Nested allow-list mapping produced by <code class="xref py py-func docutils literal notranslate"><span class="pre">load_participant_allowlists()</span></code>.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Fully populated <a class="reference internal" href="#clean_data.sessions.AllowlistState" title="clean_data.sessions.AllowlistState"><code class="xref py py-class docutils literal notranslate"><span class="pre">AllowlistState</span></code></a> instance.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><a class="reference internal" href="#clean_data.sessions.AllowlistState" title="clean_data.sessions.AllowlistState"><em>AllowlistState</em></a></p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.sessions.AllowlistState.gun_workers">
<span class="sig-name descname"><span class="pre">gun_workers</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#clean_data.sessions.AllowlistState.gun_workers" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clean_data.sessions.AllowlistState.requires_enforcement">
<span class="sig-name descname"><span class="pre">requires_enforcement</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/sessions.html#AllowlistState.requires_enforcement"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.sessions.AllowlistState.requires_enforcement" title="Link to this definition">¶</a></dt>
<dd><p>Return <code class="docutils literal notranslate"><span class="pre">True</span></code> when the given topic should be filtered by allowlists.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>topic</strong> (<em>str</em>) – Issue/topic identifier from the session logs.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p><code class="docutils literal notranslate"><span class="pre">True</span></code> when allow-lists must be enforced for the topic.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.sessions.AllowlistState.wage_study2_urlids">
<span class="sig-name descname"><span class="pre">wage_study2_urlids</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#clean_data.sessions.AllowlistState.wage_study2_urlids" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.sessions.AllowlistState.wage_study2_workers">
<span class="sig-name descname"><span class="pre">wage_study2_workers</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#clean_data.sessions.AllowlistState.wage_study2_workers" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.sessions.AllowlistState.wage_study3_caseids">
<span class="sig-name descname"><span class="pre">wage_study3_caseids</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#clean_data.sessions.AllowlistState.wage_study3_caseids" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.sessions.AllowlistState.wage_study4_urlids">
<span class="sig-name descname"><span class="pre">wage_study4_urlids</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#clean_data.sessions.AllowlistState.wage_study4_urlids" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.sessions.AllowlistState.wage_study4_workers">
<span class="sig-name descname"><span class="pre">wage_study4_workers</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Set</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#clean_data.sessions.AllowlistState.wage_study4_workers" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="clean_data.sessions.ParticipantIdentifiers">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">clean_data.sessions.</span></span><span class="sig-name descname"><span class="pre">ParticipantIdentifiers</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">worker_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">case_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">anon_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">urlid</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session_id</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">''</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/sessions.html#ParticipantIdentifiers"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.sessions.ParticipantIdentifiers" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Structured container for participant identifier fields.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>worker_id</strong> (<em>str</em>)</p></li>
<li><p><strong>case_id</strong> (<em>str</em>)</p></li>
<li><p><strong>anon_id</strong> (<em>str</em>)</p></li>
<li><p><strong>urlid</strong> (<em>str</em>)</p></li>
<li><p><strong>session_id</strong> (<em>str</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.sessions.ParticipantIdentifiers.anon_id">
<span class="sig-name descname"><span class="pre">anon_id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#clean_data.sessions.ParticipantIdentifiers.anon_id" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.sessions.ParticipantIdentifiers.case_id">
<span class="sig-name descname"><span class="pre">case_id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#clean_data.sessions.ParticipantIdentifiers.case_id" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.sessions.ParticipantIdentifiers.session_id">
<span class="sig-name descname"><span class="pre">session_id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#clean_data.sessions.ParticipantIdentifiers.session_id" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.sessions.ParticipantIdentifiers.urlid">
<span class="sig-name descname"><span class="pre">urlid</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#clean_data.sessions.ParticipantIdentifiers.urlid" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.sessions.ParticipantIdentifiers.worker_id">
<span class="sig-name descname"><span class="pre">worker_id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><em class="property"><span class="w"> </span><span class="p"><span class="pre">=</span></span><span class="w"> </span><span class="pre">''</span></em><a class="headerlink" href="#clean_data.sessions.ParticipantIdentifiers.worker_id" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="clean_data.sessions.SessionInfo">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">clean_data.sessions.</span></span><span class="sig-name descname"><span class="pre">SessionInfo</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">session_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">anon_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">topic</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">urlid</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">trajectory_json</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/sessions.html#SessionInfo"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.sessions.SessionInfo" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Normalized identifiers carried across per-session rows.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>session_id</strong> (<em>str</em>)</p></li>
<li><p><strong>anon_id</strong> (<em>str</em>)</p></li>
<li><p><strong>topic</strong> (<em>str</em>)</p></li>
<li><p><strong>urlid</strong> (<em>str</em>)</p></li>
<li><p><strong>trajectory_json</strong> (<em>str</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.sessions.SessionInfo.anon_id">
<span class="sig-name descname"><span class="pre">anon_id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#clean_data.sessions.SessionInfo.anon_id" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.sessions.SessionInfo.session_id">
<span class="sig-name descname"><span class="pre">session_id</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#clean_data.sessions.SessionInfo.session_id" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.sessions.SessionInfo.topic">
<span class="sig-name descname"><span class="pre">topic</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#clean_data.sessions.SessionInfo.topic" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.sessions.SessionInfo.trajectory_json">
<span class="sig-name descname"><span class="pre">trajectory_json</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#clean_data.sessions.SessionInfo.trajectory_json" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.sessions.SessionInfo.urlid">
<span class="sig-name descname"><span class="pre">urlid</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#clean_data.sessions.SessionInfo.urlid" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="clean_data.sessions.SessionTiming">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">clean_data.sessions.</span></span><span class="sig-name descname"><span class="pre">SessionTiming</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">start</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">end</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">watch</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">total</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">delay</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/sessions.html#SessionTiming"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.sessions.SessionTiming" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Per-session timing metadata keyed by raw/canonical video ids.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>start</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>)</p></li>
<li><p><strong>end</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>)</p></li>
<li><p><strong>watch</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>)</p></li>
<li><p><strong>total</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>)</p></li>
<li><p><strong>delay</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.sessions.SessionTiming.delay">
<span class="sig-name descname"><span class="pre">delay</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#clean_data.sessions.SessionTiming.delay" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.sessions.SessionTiming.end">
<span class="sig-name descname"><span class="pre">end</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#clean_data.sessions.SessionTiming.end" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.sessions.SessionTiming.start">
<span class="sig-name descname"><span class="pre">start</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#clean_data.sessions.SessionTiming.start" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.sessions.SessionTiming.total">
<span class="sig-name descname"><span class="pre">total</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#clean_data.sessions.SessionTiming.total" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.sessions.SessionTiming.watch">
<span class="sig-name descname"><span class="pre">watch</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#clean_data.sessions.SessionTiming.watch" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.sessions.build_codeocean_rows">
<span class="sig-prename descclassname"><span class="pre">clean_data.sessions.</span></span><span class="sig-name descname"><span class="pre">build_codeocean_rows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">data_root</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/sessions.html#build_codeocean_rows"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.sessions.build_codeocean_rows" title="Link to this definition">¶</a></dt>
<dd><p>Construct the full interaction dataframe from raw CodeOcean assets.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>data_root</strong> (<em>Path</em>) – Capsule <code class="docutils literal notranslate"><span class="pre">data</span></code> directory.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Dataframe containing per-decision rows suitable for prompt building.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.sessions.build_slate_items">
<span class="sig-prename descclassname"><span class="pre">clean_data.sessions.</span></span><span class="sig-name descname"><span class="pre">build_slate_items</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">step_index</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">display_orders</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">recommendations</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">tree_meta</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fallback_titles</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/sessions.html#build_slate_items"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.sessions.build_slate_items" title="Link to this definition">¶</a></dt>
<dd><p>Derive the slate items for the given interaction step.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>step_index</strong> (<em>int</em>)</p></li>
<li><p><strong>display_orders</strong> (<em>Dict</em><em>[</em><em>int</em><em>, </em><em>List</em><em>[</em><em>str</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>recommendations</strong> (<em>List</em><em>[</em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>] </em><em>| </em><em>None</em>)</p></li>
<li><p><strong>tree_meta</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>fallback_titles</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Tuple</em>[<em>List</em>[<em>Dict</em>[str, <em>Any</em>]], str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.sessions.coerce_session_value">
<span class="sig-prename descclassname"><span class="pre">clean_data.sessions.</span></span><span class="sig-name descname"><span class="pre">coerce_session_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/sessions.html#coerce_session_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.sessions.coerce_session_value" title="Link to this definition">¶</a></dt>
<dd><p>Convert session log values to numeric scalars when possible.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>value</strong> (<em>Any</em>) – Raw value extracted from the session payload.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Coerced scalar suitable for downstream serialization.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>Any</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.sessions.derive_next_from_history">
<span class="sig-prename descclassname"><span class="pre">clean_data.sessions.</span></span><span class="sig-name descname"><span class="pre">derive_next_from_history</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ex</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">current_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/sessions.html#derive_next_from_history"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.sessions.derive_next_from_history" title="Link to this definition">¶</a></dt>
<dd><p>Infer the next video id from the watch history when explicit labels are missing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ex</strong> (<em>dict</em>) – Session row containing watch history arrays.</p></li>
<li><p><strong>current_id</strong> (<em>str</em>) – Canonical id of the current video.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Candidate next-video id or an empty string when unavailable.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.sessions.get_gold_next_id">
<span class="sig-prename descclassname"><span class="pre">clean_data.sessions.</span></span><span class="sig-name descname"><span class="pre">get_gold_next_id</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ex</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sol_key</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/sessions.html#get_gold_next_id"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.sessions.get_gold_next_id" title="Link to this definition">¶</a></dt>
<dd><p>Resolve the gold next-video id for a session step.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>ex</strong> (<em>dict</em>) – Session row containing selection metadata.</p></li>
<li><p><strong>sol_key</strong> (<em>str</em><em> | </em><em>None</em>) – Alternate column containing the gold identifier.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Canonical gold video id or an empty string when unresolved.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.sessions.gold_index_from_items">
<span class="sig-prename descclassname"><span class="pre">clean_data.sessions.</span></span><span class="sig-name descname"><span class="pre">gold_index_from_items</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">gold</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">items</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/sessions.html#gold_index_from_items"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.sessions.gold_index_from_items" title="Link to this definition">¶</a></dt>
<dd><p>Locate the 1-based index of <code class="docutils literal notranslate"><span class="pre">gold</span></code> inside the slate items list.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>gold</strong> (<em>str</em>) – Canonical gold id to search for.</p></li>
<li><p><strong>items</strong> (<em>List</em><em>[</em><em>dict</em><em>]</em>) – Slate entries emitted by <a class="reference internal" href="#clean_data.sessions.load_slate_items" title="clean_data.sessions.load_slate_items"><code class="xref py py-func docutils literal notranslate"><span class="pre">load_slate_items()</span></code></a>.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>1-based index of the gold item, or <code class="docutils literal notranslate"><span class="pre">-1</span></code> when not found.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.sessions.load_slate_items">
<span class="sig-prename descclassname"><span class="pre">clean_data.sessions.</span></span><span class="sig-name descname"><span class="pre">load_slate_items</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">ex</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/sessions.html#load_slate_items"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.sessions.load_slate_items" title="Link to this definition">¶</a></dt>
<dd><p>Parse <code class="docutils literal notranslate"><span class="pre">slate_items_json</span></code> into a normalized list of <code class="docutils literal notranslate"><span class="pre">{title,</span> <span class="pre">id}</span></code> dicts.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>ex</strong> (<em>dict</em>) – Session row containing the slate metadata.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Ordered list of slate entries suitable for prompt construction.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>List</em>[dict]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.sessions.lookup_session_value">
<span class="sig-prename descclassname"><span class="pre">clean_data.sessions.</span></span><span class="sig-name descname"><span class="pre">lookup_session_value</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">mapping</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raw_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/sessions.html#lookup_session_value"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.sessions.lookup_session_value" title="Link to this definition">¶</a></dt>
<dd><p>Retrieve a session metric for either the raw or canonical video id.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>mapping</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – Normalized mapping produced by <a class="reference internal" href="#clean_data.sessions.normalize_session_mapping" title="clean_data.sessions.normalize_session_mapping"><code class="xref py py-func docutils literal notranslate"><span class="pre">normalize_session_mapping()</span></code></a>.</p></li>
<li><p><strong>raw_id</strong> (<em>str</em>) – Raw video identifier.</p></li>
<li><p><strong>base_id</strong> (<em>str</em>) – Canonical video identifier.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Stored metric value or <code class="docutils literal notranslate"><span class="pre">None</span></code> when absent.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>Any</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.sessions.normalize_display_orders">
<span class="sig-prename descclassname"><span class="pre">clean_data.sessions.</span></span><span class="sig-name descname"><span class="pre">normalize_display_orders</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">display_orders</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/sessions.html#normalize_display_orders"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.sessions.normalize_display_orders" title="Link to this definition">¶</a></dt>
<dd><p>Convert display order mappings into canonical id sequences.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>display_orders</strong> (<em>Any</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Dict</em>[int, <em>List</em>[str]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.sessions.normalize_session_mapping">
<span class="sig-prename descclassname"><span class="pre">clean_data.sessions.</span></span><span class="sig-name descname"><span class="pre">normalize_session_mapping</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">values</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">raw_vids</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">base_vids</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/sessions.html#normalize_session_mapping"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.sessions.normalize_session_mapping" title="Link to this definition">¶</a></dt>
<dd><p>Convert per-video session arrays/dicts into a standard lookup dict.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>values</strong> (<em>Any</em>) – Session metric stored as a dict or list.</p></li>
<li><p><strong>raw_vids</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – Sequence of raw video identifiers.</p></li>
<li><p><strong>base_vids</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>) – Sequence of canonical video identifiers.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Mapping keyed by raw id, canonical id, and index.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>Dict</em>[str, <em>Any</em>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.sessions.participant_key">
<span class="sig-prename descclassname"><span class="pre">clean_data.sessions.</span></span><span class="sig-name descname"><span class="pre">participant_key</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">identifiers</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">fallback_counter</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/sessions.html#participant_key"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.sessions.participant_key" title="Link to this definition">¶</a></dt>
<dd><p>Choose the canonical participant identifier for deduplication.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>identifiers</strong> (<a class="reference internal" href="#clean_data.sessions.ParticipantIdentifiers" title="clean_data.sessions.ParticipantIdentifiers"><em>ParticipantIdentifiers</em></a>) – Collection of candidate identifiers for a participant.</p></li>
<li><p><strong>fallback_counter</strong> (<em>int</em>) – Counter used to synthesize ids when all candidates are missing.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Tuple of (participant_id, next_fallback_counter).</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>Tuple</em>[str, int]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.sessions.split_dataframe">
<span class="sig-prename descclassname"><span class="pre">clean_data.sessions.</span></span><span class="sig-name descname"><span class="pre">split_dataframe</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validation_ratio</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">0.1</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/sessions.html#split_dataframe"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.sessions.split_dataframe" title="Link to this definition">¶</a></dt>
<dd><p>Split dataframe into train/validation partitions grouped by participant.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Interaction dataframe to split.</p></li>
<li><p><strong>validation_ratio</strong> (<em>float</em>) – Fraction of participant groups assigned to validation.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Mapping containing <code class="docutils literal notranslate"><span class="pre">train</span></code> and optional <code class="docutils literal notranslate"><span class="pre">validation</span></code> dataframes.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>Dict</em>[str, pandas.DataFrame]</p>
</dd>
</dl>
</dd></dl>

<p id="module-clean_data.surveys">Survey wrangling utilities and participant allow-list reconstruction.</p>
<p>These helpers read the various Qualtrics/YouGov exports distributed with
the capsule, build indices keyed by URL id, infer study labels, and
recreate the exact allow-lists used by the original preprocessing script.
The resulting mappings are consumed by <a class="reference internal" href="#module-clean_data.sessions" title="clean_data.sessions"><code class="xref py py-mod docutils literal notranslate"><span class="pre">clean_data.sessions</span></code></a> when
filtering session logs.</p>
<dl class="py function">
<dt class="sig sig-object py" id="clean_data.surveys.build_survey_index">
<span class="sig-prename descclassname"><span class="pre">clean_data.surveys.</span></span><span class="sig-name descname"><span class="pre">build_survey_index</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/surveys.html#build_survey_index"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.surveys.build_survey_index" title="Link to this definition">¶</a></dt>
<dd><p>Create a mapping from <code class="docutils literal notranslate"><span class="pre">urlid</span></code> to associated survey rows.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>df</strong> (<em>pandas.DataFrame</em>) – Raw survey dataframe loaded from the capsule.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Mapping of normalized <code class="docutils literal notranslate"><span class="pre">urlid</span></code> to a list of matching rows.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>Dict</em>[str, <em>List</em>[<em>Dict</em>[str, <em>Any</em>]]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.surveys.infer_issue_from_topic">
<span class="sig-prename descclassname"><span class="pre">clean_data.surveys.</span></span><span class="sig-name descname"><span class="pre">infer_issue_from_topic</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">topic_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/surveys.html#infer_issue_from_topic"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.surveys.infer_issue_from_topic" title="Link to this definition">¶</a></dt>
<dd><p>Infer the policy issue based on a noisy topic identifier.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>topic_id</strong> (<em>str</em>) – Topic string pulled from the interaction logs.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Canonical issue label or <code class="docutils literal notranslate"><span class="pre">None</span></code> when detection fails.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.surveys.infer_participant_study">
<span class="sig-prename descclassname"><span class="pre">clean_data.surveys.</span></span><span class="sig-name descname"><span class="pre">infer_participant_study</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">issue</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">survey_row</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">topic_id</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">session</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/surveys.html#infer_participant_study"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.surveys.infer_participant_study" title="Link to this definition">¶</a></dt>
<dd><p>Guess the originating study label for a participant.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>issue</strong> (<em>str</em>) – Normalized issue label (e.g. <code class="docutils literal notranslate"><span class="pre">gun_control</span></code>).</p></li>
<li><p><strong>survey_row</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>] </em><em>| </em><em>None</em>) – Selected survey entry for the participant.</p></li>
<li><p><strong>topic_id</strong> (<em>str</em>) – Topic identifier associated with the session.</p></li>
<li><p><strong>session</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em>) – Raw session payload used for additional hints.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Study label such as <code class="docutils literal notranslate"><span class="pre">study1</span></code> or <code class="docutils literal notranslate"><span class="pre">unknown</span></code>.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.surveys.load_participant_allowlists">
<span class="sig-prename descclassname"><span class="pre">clean_data.surveys.</span></span><span class="sig-name descname"><span class="pre">load_participant_allowlists</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">capsule_root</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/surveys.html#load_participant_allowlists"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.surveys.load_participant_allowlists" title="Link to this definition">¶</a></dt>
<dd><p>Reconstruct participant allow-lists used by the original R preprocessing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>capsule_root</strong> (<em>Path</em>) – Path to the CodeOcean capsule root directory.</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>Nested mapping of issue -&gt; allow-list buckets -&gt; identifier sets.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>Dict</em>[str, <em>Dict</em>[str, <em>Set</em>[str]]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.surveys.select_survey_row">
<span class="sig-prename descclassname"><span class="pre">clean_data.surveys.</span></span><span class="sig-name descname"><span class="pre">select_survey_row</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">rows</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">topic_id</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/surveys.html#select_survey_row"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.surveys.select_survey_row" title="Link to this definition">¶</a></dt>
<dd><p>Choose the most appropriate survey row for a session.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>rows</strong> (<em>List</em><em>[</em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>]</em>) – Candidate survey rows associated with a <code class="docutils literal notranslate"><span class="pre">urlid</span></code>.</p></li>
<li><p><strong>topic_id</strong> (<em>str</em>) – Topic identifier extracted from the session metadata.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>The best-matching survey row, or an empty dict when unavailable.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>Dict</em>[str, <em>Any</em>]</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-clean_data.prompt">
<span id="prompt-utilities"></span><h2>Prompt Utilities<a class="headerlink" href="#module-clean_data.prompt" title="Link to this heading">¶</a></h2>
<p>Namespace exposing the prompt analytics CLI and programmatic API.</p>
<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.generate_prompt_feature_report">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.</span></span><span class="sig-name descname"><span class="pre">generate_prompt_feature_report</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt.html#generate_prompt_feature_report"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.generate_prompt_feature_report" title="Link to this definition">¶</a></dt>
<dd><p>Delegate to <a class="reference internal" href="#clean_data.prompt.cli.generate_prompt_feature_report" title="clean_data.prompt.cli.generate_prompt_feature_report"><code class="xref py py-func docutils literal notranslate"><span class="pre">clean_data.prompt.cli.generate_prompt_feature_report()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<em>Any</em>)</p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Any</em></p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.main">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="o"><span class="pre">*</span></span><span class="n"><span class="pre">args</span></span></em>, <em class="sig-param"><span class="o"><span class="pre">**</span></span><span class="n"><span class="pre">kwargs</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.main" title="Link to this definition">¶</a></dt>
<dd><p>Delegate to <a class="reference internal" href="#clean_data.prompt.cli.main" title="clean_data.prompt.cli.main"><code class="xref py py-func docutils literal notranslate"><span class="pre">clean_data.prompt.cli.main()</span></code></a>.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>args</strong> (<em>Any</em>)</p></li>
<li><p><strong>kwargs</strong> (<em>Any</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Any</em></p>
</dd>
</dl>
</dd></dl>

<p id="module-clean_data.prompt.cli">Command-line front-end for generating prompt feature statistics.</p>
<p>The CLI loads a cleaned dataset, computes summary metrics, renders plots,
and writes a Markdown report describing viewer coverage, feature richness,
and participation statistics.  It is typically invoked by the main
cleaning workflow but can be used standalone for exploratory analysis.</p>
<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.cli.generate_prompt_feature_report">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.cli.</span></span><span class="sig-name descname"><span class="pre">generate_prompt_feature_report</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_split</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'train'</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">validation_split</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">'validation'</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/cli.html#generate_prompt_feature_report"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.cli.generate_prompt_feature_report" title="Link to this definition">¶</a></dt>
<dd><p>Generate exploratory prompt statistics and write plots plus summaries.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> (<em>datasets.DatasetDict</em>)</p></li>
<li><p><strong>output_dir</strong> (<em>Path</em>)</p></li>
<li><p><strong>train_split</strong> (<em>str</em>)</p></li>
<li><p><strong>validation_split</strong> (<em>str</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.cli.main">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.cli.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/cli.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.cli.main" title="Link to this definition">¶</a></dt>
<dd><p>Entrypoint for the <code class="docutils literal notranslate"><span class="pre">prompt-stats</span></code> command line interface.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>None</p>
</dd>
</dl>
</dd></dl>

<p id="module-clean_data.prompt.constants">Shared constants for prompt building and stats.</p>
<p id="module-clean_data.prompt.markdown">Generate the human-readable Markdown report for prompt analytics results.</p>
<p>The functions here translate the structured summaries computed by the
prompt CLI into narrative sections, tables, and figure references so the
cleaning workflow can emit a ready-to-publish README alongside plots.</p>
<dl class="py class">
<dt class="sig sig-object py" id="clean_data.prompt.markdown.ReportContext">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">clean_data.prompt.markdown.</span></span><span class="sig-name descname"><span class="pre">ReportContext</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figures_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">summaries</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figures</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/markdown.html#ReportContext"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.markdown.ReportContext" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Full context bundle required to build the prompt report.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>output_dir</strong> (<em>Path</em>)</p></li>
<li><p><strong>figures_dir</strong> (<em>Path</em>)</p></li>
<li><p><strong>summaries</strong> (<a class="reference internal" href="#clean_data.prompt.markdown.ReportSummaries" title="clean_data.prompt.markdown.ReportSummaries"><em>ReportSummaries</em></a>)</p></li>
<li><p><strong>figures</strong> (<a class="reference internal" href="#clean_data.prompt.markdown.ReportFigures" title="clean_data.prompt.markdown.ReportFigures"><em>ReportFigures</em></a>)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.prompt.markdown.ReportContext.figures">
<span class="sig-name descname"><span class="pre">figures</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#clean_data.prompt.markdown.ReportFigures" title="clean_data.prompt.markdown.ReportFigures"><span class="pre">ReportFigures</span></a></em><a class="headerlink" href="#clean_data.prompt.markdown.ReportContext.figures" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.prompt.markdown.ReportContext.figures_dir">
<span class="sig-name descname"><span class="pre">figures_dir</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Path</span></em><a class="headerlink" href="#clean_data.prompt.markdown.ReportContext.figures_dir" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.prompt.markdown.ReportContext.output_dir">
<span class="sig-name descname"><span class="pre">output_dir</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Path</span></em><a class="headerlink" href="#clean_data.prompt.markdown.ReportContext.output_dir" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.prompt.markdown.ReportContext.summaries">
<span class="sig-name descname"><span class="pre">summaries</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#clean_data.prompt.markdown.ReportSummaries" title="clean_data.prompt.markdown.ReportSummaries"><span class="pre">ReportSummaries</span></a></em><a class="headerlink" href="#clean_data.prompt.markdown.ReportContext.summaries" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="clean_data.prompt.markdown.ReportCounts">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">clean_data.prompt.markdown.</span></span><span class="sig-name descname"><span class="pre">ReportCounts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prior_history</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_options</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">demographic_missing</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">unique_content</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">participant</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/markdown.html#ReportCounts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.markdown.ReportCounts" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Aggregated count metrics used in the report.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prior_history</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Dict</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>n_options</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Dict</em><em>[</em><em>int</em><em>, </em><em>int</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>demographic_missing</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>float</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>unique_content</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>int</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>participant</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>]</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.prompt.markdown.ReportCounts.demographic_missing">
<span class="sig-name descname"><span class="pre">demographic_missing</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#clean_data.prompt.markdown.ReportCounts.demographic_missing" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.prompt.markdown.ReportCounts.n_options">
<span class="sig-name descname"><span class="pre">n_options</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#clean_data.prompt.markdown.ReportCounts.n_options" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.prompt.markdown.ReportCounts.participant">
<span class="sig-name descname"><span class="pre">participant</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#clean_data.prompt.markdown.ReportCounts.participant" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.prompt.markdown.ReportCounts.prior_history">
<span class="sig-name descname"><span class="pre">prior_history</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">int</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#clean_data.prompt.markdown.ReportCounts.prior_history" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.prompt.markdown.ReportCounts.unique_content">
<span class="sig-name descname"><span class="pre">unique_content</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#clean_data.prompt.markdown.ReportCounts.unique_content" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="clean_data.prompt.markdown.ReportFigures">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">clean_data.prompt.markdown.</span></span><span class="sig-name descname"><span class="pre">ReportFigures</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">prior_history</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">n_options</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">demographic</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/markdown.html#ReportFigures"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.markdown.ReportFigures" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Paths to rendered summary figures.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>prior_history</strong> (<em>Path</em>)</p></li>
<li><p><strong>n_options</strong> (<em>Path</em>)</p></li>
<li><p><strong>demographic</strong> (<em>Path</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.prompt.markdown.ReportFigures.demographic">
<span class="sig-name descname"><span class="pre">demographic</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Path</span></em><a class="headerlink" href="#clean_data.prompt.markdown.ReportFigures.demographic" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.prompt.markdown.ReportFigures.n_options">
<span class="sig-name descname"><span class="pre">n_options</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Path</span></em><a class="headerlink" href="#clean_data.prompt.markdown.ReportFigures.n_options" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.prompt.markdown.ReportFigures.prior_history">
<span class="sig-name descname"><span class="pre">prior_history</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Path</span></em><a class="headerlink" href="#clean_data.prompt.markdown.ReportFigures.prior_history" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py class">
<dt class="sig sig-object py" id="clean_data.prompt.markdown.ReportSummaries">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">clean_data.prompt.markdown.</span></span><span class="sig-name descname"><span class="pre">ReportSummaries</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feature</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">profile</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">counts</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">coverage</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">skipped_features</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/markdown.html#ReportSummaries"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.markdown.ReportSummaries" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Feature-level summaries used to render the Markdown report.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>feature</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>float</em><em> | </em><em>int</em><em>]</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>profile</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>float</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>counts</strong> (<a class="reference internal" href="#clean_data.prompt.markdown.ReportCounts" title="clean_data.prompt.markdown.ReportCounts"><em>ReportCounts</em></a>)</p></li>
<li><p><strong>coverage</strong> (<em>Dict</em><em>[</em><em>str</em><em>, </em><em>Dict</em><em>[</em><em>str</em><em>, </em><em>Any</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>skipped_features</strong> (<em>List</em><em>[</em><em>str</em><em>]</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.prompt.markdown.ReportSummaries.counts">
<span class="sig-name descname"><span class="pre">counts</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><a class="reference internal" href="#clean_data.prompt.markdown.ReportCounts" title="clean_data.prompt.markdown.ReportCounts"><span class="pre">ReportCounts</span></a></em><a class="headerlink" href="#clean_data.prompt.markdown.ReportSummaries.counts" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.prompt.markdown.ReportSummaries.coverage">
<span class="sig-name descname"><span class="pre">coverage</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Any</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#clean_data.prompt.markdown.ReportSummaries.coverage" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.prompt.markdown.ReportSummaries.feature">
<span class="sig-name descname"><span class="pre">feature</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="w"> </span><span class="p"><span class="pre">|</span></span><span class="w"> </span><span class="pre">int</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#clean_data.prompt.markdown.ReportSummaries.feature" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.prompt.markdown.ReportSummaries.profile">
<span class="sig-name descname"><span class="pre">profile</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">Dict</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">,</span></span><span class="w"> </span><span class="pre">float</span><span class="p"><span class="pre">]</span></span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#clean_data.prompt.markdown.ReportSummaries.profile" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.prompt.markdown.ReportSummaries.skipped_features">
<span class="sig-name descname"><span class="pre">skipped_features</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">List</span><span class="p"><span class="pre">[</span></span><span class="pre">str</span><span class="p"><span class="pre">]</span></span></em><a class="headerlink" href="#clean_data.prompt.markdown.ReportSummaries.skipped_features" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.markdown.build_markdown_report">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.markdown.</span></span><span class="sig-name descname"><span class="pre">build_markdown_report</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">context</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/markdown.html#build_markdown_report"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.markdown.build_markdown_report" title="Link to this definition">¶</a></dt>
<dd><p>Return rendered Markdown lines summarizing the prompt statistics.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>context</strong> (<a class="reference internal" href="#clean_data.prompt.markdown.ReportContext" title="clean_data.prompt.markdown.ReportContext"><em>ReportContext</em></a>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>List</em>[str]</p>
</dd>
</dl>
</dd></dl>

<p id="module-clean_data.prompt.plotting">Matplotlib-based visualisations for the prompt analytics workflow.</p>
<p>These helpers generate the numeric and categorical histograms that populate
the prompt feature report, both at the global level and broken down by
issue, enabling quick inspection of the cleaned dataset.</p>
<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.plotting.plot_categorical_hist">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.plotting.</span></span><span class="sig-name descname"><span class="pre">plot_categorical_hist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">train_vals</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val_vals</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/plotting.html#plot_categorical_hist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.plotting.plot_categorical_hist" title="Link to this definition">¶</a></dt>
<dd><p>Plot side-by-side categorical histograms for train and validation splits.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>train_vals</strong> (<em>pandas.Series</em>)</p></li>
<li><p><strong>val_vals</strong> (<em>pandas.Series</em>)</p></li>
<li><p><strong>title</strong> (<em>str</em>)</p></li>
<li><p><strong>output_path</strong> (<em>Path</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.plotting.plot_categorical_hist_by_issue">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.plotting.</span></span><span class="sig-name descname"><span class="pre">plot_categorical_hist_by_issue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pair</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/plotting.html#plot_categorical_hist_by_issue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.plotting.plot_categorical_hist_by_issue" title="Link to this definition">¶</a></dt>
<dd><p>Render per-issue categorical histograms, falling back to global plots.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pair</strong> (<a class="reference internal" href="#clean_data.prompt.utils.SeriesPair" title="clean_data.prompt.utils.SeriesPair"><em>SeriesPair</em></a>)</p></li>
<li><p><strong>title</strong> (<em>str</em>)</p></li>
<li><p><strong>output_path</strong> (<em>Path</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.plotting.plot_numeric_hist">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.plotting.</span></span><span class="sig-name descname"><span class="pre">plot_numeric_hist</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">train_vals</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val_vals</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/plotting.html#plot_numeric_hist"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.plotting.plot_numeric_hist" title="Link to this definition">¶</a></dt>
<dd><p>Plot side-by-side numeric histograms for train and validation splits.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>train_vals</strong> (<em>pandas.Series</em>)</p></li>
<li><p><strong>val_vals</strong> (<em>pandas.Series</em>)</p></li>
<li><p><strong>title</strong> (<em>str</em>)</p></li>
<li><p><strong>output_path</strong> (<em>Path</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.plotting.plot_numeric_hist_by_issue">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.plotting.</span></span><span class="sig-name descname"><span class="pre">plot_numeric_hist_by_issue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pair</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/plotting.html#plot_numeric_hist_by_issue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.plotting.plot_numeric_hist_by_issue" title="Link to this definition">¶</a></dt>
<dd><p>Render per-issue numeric histograms, falling back to global plots.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pair</strong> (<a class="reference internal" href="#clean_data.prompt.utils.SeriesPair" title="clean_data.prompt.utils.SeriesPair"><em>SeriesPair</em></a>)</p></li>
<li><p><strong>title</strong> (<em>str</em>)</p></li>
<li><p><strong>output_path</strong> (<em>Path</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<p id="module-clean_data.prompt.question_mapping">Reference mapping between Qualtrics question IDs and friendly feature names.</p>
<p>This table helps us keep track of where each prompt feature originates in the
CodeOcean survey exports.  The <code class="docutils literal notranslate"><span class="pre">question_ids</span></code> list contains the raw column
names observed across the intermediate CSVs for Studies 1–4.  When the builder
renames or aggregates features, refer back here to understand which Qualtrics
items are involved.</p>
<p id="module-clean_data.prompt.summary">Summarization helpers for prompt statistics.</p>
<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.summary.demographic_missing_summary">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.summary.</span></span><span class="sig-name descname"><span class="pre">demographic_missing_summary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">train_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figures_dir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/summary.html#demographic_missing_summary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.summary.demographic_missing_summary" title="Link to this definition">¶</a></dt>
<dd><p>Report rows missing all demographic feature columns and render a bar chart.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>train_df</strong> (<em>pandas.DataFrame</em>)</p></li>
<li><p><strong>val_df</strong> (<em>pandas.DataFrame</em>)</p></li>
<li><p><strong>figures_dir</strong> (<em>Path</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Tuple</em>[<em>Dict</em>[str, <em>Dict</em>[str, float]], <em>Path</em>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.summary.n_options_summary">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.summary.</span></span><span class="sig-name descname"><span class="pre">n_options_summary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">train_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figures_dir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/summary.html#n_options_summary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.summary.n_options_summary" title="Link to this definition">¶</a></dt>
<dd><p>Summarize slate sizes and render their distribution chart.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>train_df</strong> (<em>pandas.DataFrame</em>)</p></li>
<li><p><strong>val_df</strong> (<em>pandas.DataFrame</em>)</p></li>
<li><p><strong>figures_dir</strong> (<em>Path</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Tuple</em>[<em>Dict</em>[str, <em>Dict</em>[int, int]], <em>Path</em>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.summary.participant_counts_summary">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.summary.</span></span><span class="sig-name descname"><span class="pre">participant_counts_summary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">train_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val_df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/summary.html#participant_counts_summary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.summary.participant_counts_summary" title="Link to this definition">¶</a></dt>
<dd><p>Summarize participant counts for each split and overall.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>train_df</strong> (<em>pandas.DataFrame</em>)</p></li>
<li><p><strong>val_df</strong> (<em>pandas.DataFrame</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Dict</em>[str, <em>Dict</em>[str, <em>Any</em>]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.summary.prior_history_summary">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.summary.</span></span><span class="sig-name descname"><span class="pre">prior_history_summary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">train_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figures_dir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/summary.html#prior_history_summary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.summary.prior_history_summary" title="Link to this definition">¶</a></dt>
<dd><p>Compute prior-history counts and render the corresponding chart.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>train_df</strong> (<em>pandas.DataFrame</em>)</p></li>
<li><p><strong>val_df</strong> (<em>pandas.DataFrame</em>)</p></li>
<li><p><strong>figures_dir</strong> (<em>Path</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Tuple</em>[<em>Dict</em>[str, <em>Dict</em>[int, int]], <em>Path</em>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.summary.profile_summary">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.summary.</span></span><span class="sig-name descname"><span class="pre">profile_summary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">train_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">profile_col</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/summary.html#profile_summary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.summary.profile_summary" title="Link to this definition">¶</a></dt>
<dd><p>Return profile availability counts for each split.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>train_df</strong> (<em>pandas.DataFrame</em>)</p></li>
<li><p><strong>val_df</strong> (<em>pandas.DataFrame</em>)</p></li>
<li><p><strong>profile_col</strong> (<em>str</em><em> | </em><em>None</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Dict</em>[str, <em>Dict</em>[str, float]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.summary.summarize_feature">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.summary.</span></span><span class="sig-name descname"><span class="pre">summarize_feature</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">pair</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/summary.html#summarize_feature"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.summary.summarize_feature" title="Link to this definition">¶</a></dt>
<dd><p>Render plots for a feature and return summary statistics.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>pair</strong> (<a class="reference internal" href="#clean_data.prompt.utils.SeriesPair" title="clean_data.prompt.utils.SeriesPair"><em>SeriesPair</em></a>)</p></li>
<li><p><strong>label</strong> (<em>str</em>)</p></li>
<li><p><strong>output_path</strong> (<em>Path</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Dict</em>[str, <em>Dict</em>[str, float | int]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.summary.summarize_features">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.summary.</span></span><span class="sig-name descname"><span class="pre">summarize_features</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">train_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">figures_dir</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/summary.html#summarize_features"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.summary.summarize_features" title="Link to this definition">¶</a></dt>
<dd><p>Generate plots/statistics for all prompt features.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>train_df</strong> (<em>pandas.DataFrame</em>)</p></li>
<li><p><strong>val_df</strong> (<em>pandas.DataFrame</em>)</p></li>
<li><p><strong>figures_dir</strong> (<em>Path</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Tuple</em>[<em>Dict</em>[str, <em>Dict</em>[str, <em>Dict</em>[str, float | int]]], <em>List</em>[str]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.summary.unique_content_counts">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.summary.</span></span><span class="sig-name descname"><span class="pre">unique_content_counts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">train_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val_df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/summary.html#unique_content_counts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.summary.unique_content_counts" title="Link to this definition">¶</a></dt>
<dd><p>Return counts of unique content per split.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>train_df</strong> (<em>pandas.DataFrame</em>)</p></li>
<li><p><strong>val_df</strong> (<em>pandas.DataFrame</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Dict</em>[str, <em>Dict</em>[str, int]]</p>
</dd>
</dl>
</dd></dl>

<p id="module-clean_data.prompt.utils">Utility functions and data structures shared by prompt analytics code.</p>
<p>This module abstracts dataset loading, Series manipulations, and summary
helpers that are reused by the plotting, Markdown, and CLI components of
the prompt reporting pipeline.</p>
<dl class="py class">
<dt class="sig sig-object py" id="clean_data.prompt.utils.SeriesPair">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">clean_data.prompt.utils.</span></span><span class="sig-name descname"><span class="pre">SeriesPair</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">train_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val_series</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">train_df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">val_df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/utils.html#SeriesPair"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.utils.SeriesPair" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Bundle training/validation series alongside their originating dataframes.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>train_series</strong> (<em>pandas.Series</em>)</p></li>
<li><p><strong>val_series</strong> (<em>pandas.Series</em>)</p></li>
<li><p><strong>train_df</strong> (<em>pandas.DataFrame</em>)</p></li>
<li><p><strong>val_df</strong> (<em>pandas.DataFrame</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py method">
<dt class="sig sig-object py" id="clean_data.prompt.utils.SeriesPair.has_issue">
<span class="sig-name descname"><span class="pre">has_issue</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/utils.html#SeriesPair.has_issue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.utils.SeriesPair.has_issue" title="Link to this definition">¶</a></dt>
<dd><p>Return True when both dataframes expose an ‘issue’ column.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clean_data.prompt.utils.SeriesPair.issue_names">
<span class="sig-name descname"><span class="pre">issue_names</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/utils.html#SeriesPair.issue_names"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.utils.SeriesPair.issue_names" title="Link to this definition">¶</a></dt>
<dd><p>Collect normalized issue names available in the pair.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>List</em>[str]</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="clean_data.prompt.utils.SeriesPair.split_by_issue">
<span class="sig-name descname"><span class="pre">split_by_issue</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">cleaner</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/utils.html#SeriesPair.split_by_issue"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.utils.SeriesPair.split_by_issue" title="Link to this definition">¶</a></dt>
<dd><p>Return per-issue subsets using the provided cleaning function.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>cleaner</strong> (<em>Callable</em><em>[</em><em>[</em><em>pandas.Series</em><em>]</em><em>, </em><em>pandas.Series</em><em>]</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>List</em>[<em>Tuple</em>[str, pandas.Series, pandas.Series]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.prompt.utils.SeriesPair.train_df">
<span class="sig-name descname"><span class="pre">train_df</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">pandas.DataFrame</span></em><a class="headerlink" href="#clean_data.prompt.utils.SeriesPair.train_df" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.prompt.utils.SeriesPair.train_series">
<span class="sig-name descname"><span class="pre">train_series</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">pandas.Series</span></em><a class="headerlink" href="#clean_data.prompt.utils.SeriesPair.train_series" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.prompt.utils.SeriesPair.val_df">
<span class="sig-name descname"><span class="pre">val_df</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">pandas.DataFrame</span></em><a class="headerlink" href="#clean_data.prompt.utils.SeriesPair.val_df" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.prompt.utils.SeriesPair.val_series">
<span class="sig-name descname"><span class="pre">val_series</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">pandas.Series</span></em><a class="headerlink" href="#clean_data.prompt.utils.SeriesPair.val_series" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.utils.canonical_slate_items">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.utils.</span></span><span class="sig-name descname"><span class="pre">canonical_slate_items</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/utils.html#canonical_slate_items"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.utils.canonical_slate_items" title="Link to this definition">¶</a></dt>
<dd><p>Normalize a slate representation to a tuple of video ids.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>value</strong> (<em>Any</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Tuple</em>[str, …] | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.utils.categorical_summary">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.utils.</span></span><span class="sig-name descname"><span class="pre">categorical_summary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/utils.html#categorical_summary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.utils.categorical_summary" title="Link to this definition">¶</a></dt>
<dd><p>Return counts for each categorical value in the series.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>series</strong> (<em>pandas.Series</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Dict</em>[str, int]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.utils.clean_viewer_profile">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.utils.</span></span><span class="sig-name descname"><span class="pre">clean_viewer_profile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/utils.html#clean_viewer_profile"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.utils.clean_viewer_profile" title="Link to this definition">¶</a></dt>
<dd><p>Normalize viewer profile sentences by stripping NaN-like values.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>series</strong> (<em>pandas.Series</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>pandas.Series</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.utils.convert_numeric">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.utils.</span></span><span class="sig-name descname"><span class="pre">convert_numeric</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/utils.html#convert_numeric"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.utils.convert_numeric" title="Link to this definition">¶</a></dt>
<dd><p>Coerce a series to numeric values, ignoring unconvertible entries.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>series</strong> (<em>pandas.Series</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>pandas.Series | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.utils.core_prompt_mask">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.utils.</span></span><span class="sig-name descname"><span class="pre">core_prompt_mask</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/utils.html#core_prompt_mask"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.utils.core_prompt_mask" title="Link to this definition">¶</a></dt>
<dd><p>Return a boolean mask selecting rows from core studies and issues.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>df</strong> (<em>pandas.DataFrame</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>pandas.Series</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.utils.count_prior_history">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.utils.</span></span><span class="sig-name descname"><span class="pre">count_prior_history</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">row</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/utils.html#count_prior_history"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.utils.count_prior_history" title="Link to this definition">¶</a></dt>
<dd><p>Count the number of prior videos available in the interaction history.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>row</strong> (<em>pandas.Series</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.utils.dedupe_participants">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.utils.</span></span><span class="sig-name descname"><span class="pre">dedupe_participants</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/utils.html#dedupe_participants"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.utils.dedupe_participants" title="Link to this definition">¶</a></dt>
<dd><p>Deduplicate rows so each participant/issue pair appears once.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>df</strong> (<em>pandas.DataFrame</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.utils.ensure_dir">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.utils.</span></span><span class="sig-name descname"><span class="pre">ensure_dir</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/utils.html#ensure_dir"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.utils.ensure_dir" title="Link to this definition">¶</a></dt>
<dd><p>Create the directory hierarchy when it does not already exist.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path</strong> (<em>Path</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.utils.feature_label">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.utils.</span></span><span class="sig-name descname"><span class="pre">feature_label</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">feature_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/utils.html#feature_label"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.utils.feature_label" title="Link to this definition">¶</a></dt>
<dd><p>Return a human-readable label for the feature name.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>feature_name</strong> (<em>str</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>str</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.utils.filter_core_prompt_rows">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.utils.</span></span><span class="sig-name descname"><span class="pre">filter_core_prompt_rows</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/utils.html#filter_core_prompt_rows"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.utils.filter_core_prompt_rows" title="Link to this definition">¶</a></dt>
<dd><p>Filter a dataframe down to the core studies/issues used in reporting.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>df</strong> (<em>pandas.DataFrame</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.utils.first_present">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.utils.</span></span><span class="sig-name descname"><span class="pre">first_present</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">row</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/utils.html#first_present"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.utils.first_present" title="Link to this definition">¶</a></dt>
<dd><p>Return the first non-missing value from the provided columns.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>row</strong> (<em>pandas.Series</em>)</p></li>
<li><p><strong>columns</strong> (<em>Sequence</em><em>[</em><em>str</em><em>]</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>object | None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.utils.is_nanlike">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.utils.</span></span><span class="sig-name descname"><span class="pre">is_nanlike</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">value</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/utils.html#is_nanlike"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.utils.is_nanlike" title="Link to this definition">¶</a></dt>
<dd><p>Return True when the value should be treated as missing.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>value</strong> (<em>Any</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>bool</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.utils.load_dataset_any">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.utils.</span></span><span class="sig-name descname"><span class="pre">load_dataset_any</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">path_or_name</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/utils.html#load_dataset_any"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.utils.load_dataset_any" title="Link to this definition">¶</a></dt>
<dd><p>Load a dataset from disk or from the Hugging Face hub.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>path_or_name</strong> (<em>str</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>datasets.DatasetDict</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.utils.non_missing">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.utils.</span></span><span class="sig-name descname"><span class="pre">non_missing</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/utils.html#non_missing"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.utils.non_missing" title="Link to this definition">¶</a></dt>
<dd><p>Filter a series to entries that are not NaN-like.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>series</strong> (<em>pandas.Series</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>pandas.Series</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.utils.numeric_summary">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.utils.</span></span><span class="sig-name descname"><span class="pre">numeric_summary</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/utils.html#numeric_summary"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.utils.numeric_summary" title="Link to this definition">¶</a></dt>
<dd><p>Compute count, mean, and std for a numeric series.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>series</strong> (<em>pandas.Series</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Dict</em>[str, float]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.utils.participant_ids">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.utils.</span></span><span class="sig-name descname"><span class="pre">participant_ids</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/utils.html#participant_ids"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.utils.participant_ids" title="Link to this definition">¶</a></dt>
<dd><p>Return a best-effort participant identifier for each row.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>df</strong> (<em>pandas.DataFrame</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>pandas.Series</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.utils.participant_stats">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.utils.</span></span><span class="sig-name descname"><span class="pre">participant_stats</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/utils.html#participant_stats"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.utils.participant_stats" title="Link to this definition">¶</a></dt>
<dd><p>Compute participant counts overall, by issue, and by study.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>df</strong> (<em>pandas.DataFrame</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Dict</em>[str, <em>Any</em>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.prompt.utils.series_from_columns">
<span class="sig-prename descclassname"><span class="pre">clean_data.prompt.utils.</span></span><span class="sig-name descname"><span class="pre">series_from_columns</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">columns</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/prompt/utils.html#series_from_columns"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.prompt.utils.series_from_columns" title="Link to this definition">¶</a></dt>
<dd><p>Collapse multiple candidate columns into a single best-effort series.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>)</p></li>
<li><p><strong>columns</strong> (<em>Sequence</em><em>[</em><em>str</em><em>]</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>pandas.Series</p>
</dd>
</dl>
</dd></dl>

</section>
<section id="module-clean_data.research_article_political_sciences">
<span id="research-article-replication"></span><h2>Research Article Replication<a class="headerlink" href="#module-clean_data.research_article_political_sciences" title="Link to this heading">¶</a></h2>
<p>Analysis utilities replicating the PNAS filter-bubble study findings.</p>
<p>This package builds heatmaps and summary statistics that mirror the
short-term opinion shifts reported in <em>Short-term exposure to filter-bubble
recommendation systems has limited polarization effects: Naturalistic
experiments on YouTube</em> (PNAS, 2025).</p>
<dl class="py function">
<dt class="sig sig-object py" id="clean_data.research_article_political_sciences.generate_research_article_report">
<span class="sig-prename descclassname"><span class="pre">clean_data.research_article_political_sciences.</span></span><span class="sig-name descname"><span class="pre">generate_research_article_report</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_dir</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">heatmap_bins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/research_article_political_sciences/report.html#generate_research_article_report"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.research_article_political_sciences.generate_research_article_report" title="Link to this definition">¶</a></dt>
<dd><p>Generate heatmaps and Markdown summarising opinion shifts per study.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> (<em>datasets.DatasetDict</em>)</p></li>
<li><p><strong>output_dir</strong> (<em>Path</em><em> | </em><em>str</em>)</p></li>
<li><p><strong>heatmap_bins</strong> (<em>int</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Dict</em>[str, object]</p>
</dd>
</dl>
</dd></dl>

<p id="module-clean_data.research_article_political_sciences.analysis">Core data wrangling helpers for the political sciences replication.</p>
<dl class="py class">
<dt class="sig sig-object py" id="clean_data.research_article_political_sciences.analysis.StudySpec">
<em class="property"><span class="k"><span class="pre">class</span></span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">clean_data.research_article_political_sciences.analysis.</span></span><span class="sig-name descname"><span class="pre">StudySpec</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">key</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">issue</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">label</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">before_column</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">after_column</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">heatmap_filename</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/research_article_political_sciences/analysis.html#StudySpec"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.research_article_political_sciences.analysis.StudySpec" title="Link to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Configuration describing one study’s pre/post opinion columns.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>key</strong> (<em>str</em>)</p></li>
<li><p><strong>issue</strong> (<em>str</em>)</p></li>
<li><p><strong>label</strong> (<em>str</em>)</p></li>
<li><p><strong>before_column</strong> (<em>str</em>)</p></li>
<li><p><strong>after_column</strong> (<em>str</em>)</p></li>
<li><p><strong>heatmap_filename</strong> (<em>str</em>)</p></li>
</ul>
</dd>
</dl>
<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.research_article_political_sciences.analysis.StudySpec.after_column">
<span class="sig-name descname"><span class="pre">after_column</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#clean_data.research_article_political_sciences.analysis.StudySpec.after_column" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.research_article_political_sciences.analysis.StudySpec.before_column">
<span class="sig-name descname"><span class="pre">before_column</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#clean_data.research_article_political_sciences.analysis.StudySpec.before_column" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.research_article_political_sciences.analysis.StudySpec.heatmap_filename">
<span class="sig-name descname"><span class="pre">heatmap_filename</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#clean_data.research_article_political_sciences.analysis.StudySpec.heatmap_filename" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.research_article_political_sciences.analysis.StudySpec.issue">
<span class="sig-name descname"><span class="pre">issue</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#clean_data.research_article_political_sciences.analysis.StudySpec.issue" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.research_article_political_sciences.analysis.StudySpec.key">
<span class="sig-name descname"><span class="pre">key</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#clean_data.research_article_political_sciences.analysis.StudySpec.key" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="py attribute">
<dt class="sig sig-object py" id="clean_data.research_article_political_sciences.analysis.StudySpec.label">
<span class="sig-name descname"><span class="pre">label</span></span><em class="property"><span class="p"><span class="pre">:</span></span><span class="w"> </span><span class="pre">str</span></em><a class="headerlink" href="#clean_data.research_article_political_sciences.analysis.StudySpec.label" title="Link to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.research_article_political_sciences.analysis.assemble_study_specs">
<span class="sig-prename descclassname"><span class="pre">clean_data.research_article_political_sciences.analysis.</span></span><span class="sig-name descname"><span class="pre">assemble_study_specs</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/research_article_political_sciences/analysis.html#assemble_study_specs"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.research_article_political_sciences.analysis.assemble_study_specs" title="Link to this definition">¶</a></dt>
<dd><p>Return the static study specifications handled by the report.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>Iterable</em>[<a class="reference internal" href="#clean_data.research_article_political_sciences.analysis.StudySpec" title="clean_data.research_article_political_sciences.analysis.StudySpec"><em>StudySpec</em></a>]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.research_article_political_sciences.analysis.compute_treatment_regression">
<span class="sig-prename descclassname"><span class="pre">clean_data.research_article_political_sciences.analysis.</span></span><span class="sig-name descname"><span class="pre">compute_treatment_regression</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/research_article_political_sciences/analysis.html#compute_treatment_regression"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.research_article_political_sciences.analysis.compute_treatment_regression" title="Link to this definition">¶</a></dt>
<dd><p>Estimate a study-adjusted treatment effect on opinion change.</p>
<p>The model regresses <code class="docutils literal notranslate"><span class="pre">after</span> <span class="pre">-</span> <span class="pre">before</span></code> on a treatment indicator with
study fixed-effects (Study 1 as the reference category).  Returns the
coefficient, standard error, 95% CI, and two-sided p-value.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>df</strong> (<em>pandas.DataFrame</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Dict</em>[str, float]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.research_article_political_sciences.analysis.dataframe_from_splits">
<span class="sig-prename descclassname"><span class="pre">clean_data.research_article_political_sciences.analysis.</span></span><span class="sig-name descname"><span class="pre">dataframe_from_splits</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/research_article_political_sciences/analysis.html#dataframe_from_splits"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.research_article_political_sciences.analysis.dataframe_from_splits" title="Link to this definition">¶</a></dt>
<dd><p>Combine all dataset splits into a single pandas dataframe.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>dataset</strong> (<em>datasets.DatasetDict</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.research_article_political_sciences.analysis.histogram2d_counts">
<span class="sig-prename descclassname"><span class="pre">clean_data.research_article_political_sciences.analysis.</span></span><span class="sig-name descname"><span class="pre">histogram2d_counts</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">before_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">after_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bins</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/research_article_political_sciences/analysis.html#histogram2d_counts"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.research_article_political_sciences.analysis.histogram2d_counts" title="Link to this definition">¶</a></dt>
<dd><p>Return a 2D histogram of before vs. after opinion indices.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>)</p></li>
<li><p><strong>before_col</strong> (<em>str</em>)</p></li>
<li><p><strong>after_col</strong> (<em>str</em>)</p></li>
<li><p><strong>bins</strong> (<em>int</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Tuple</em>[numpy.ndarray, numpy.ndarray]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.research_article_political_sciences.analysis.load_assignment_frame">
<span class="sig-prename descclassname"><span class="pre">clean_data.research_article_political_sciences.analysis.</span></span><span class="sig-name descname"><span class="pre">load_assignment_frame</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">spec</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/research_article_political_sciences/analysis.html#load_assignment_frame"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.research_article_political_sciences.analysis.load_assignment_frame" title="Link to this definition">¶</a></dt>
<dd><p>Load a dataframe containing control/treatment assignments for a study.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>spec</strong> (<a class="reference internal" href="#clean_data.research_article_political_sciences.analysis.StudySpec" title="clean_data.research_article_political_sciences.analysis.StudySpec"><em>StudySpec</em></a>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.research_article_political_sciences.analysis.prepare_study_frame">
<span class="sig-prename descclassname"><span class="pre">clean_data.research_article_political_sciences.analysis.</span></span><span class="sig-name descname"><span class="pre">prepare_study_frame</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frame</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spec</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/research_article_political_sciences/analysis.html#prepare_study_frame"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.research_article_political_sciences.analysis.prepare_study_frame" title="Link to this definition">¶</a></dt>
<dd><p>Filter the combined dataframe down to the rows matching a study.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>frame</strong> (<em>pandas.DataFrame</em>)</p></li>
<li><p><strong>spec</strong> (<a class="reference internal" href="#clean_data.research_article_political_sciences.analysis.StudySpec" title="clean_data.research_article_political_sciences.analysis.StudySpec"><em>StudySpec</em></a>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>pandas.DataFrame</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.research_article_political_sciences.analysis.summarise_assignments">
<span class="sig-prename descclassname"><span class="pre">clean_data.research_article_political_sciences.analysis.</span></span><span class="sig-name descname"><span class="pre">summarise_assignments</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">frame</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/research_article_political_sciences/analysis.html#summarise_assignments"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.research_article_political_sciences.analysis.summarise_assignments" title="Link to this definition">¶</a></dt>
<dd><p>Return summary statistics for each assignment group in a dataframe.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>frame</strong> (<em>pandas.DataFrame</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>List</em>[<em>Dict</em>[str, float]]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.research_article_political_sciences.analysis.summarise_shift">
<span class="sig-prename descclassname"><span class="pre">clean_data.research_article_political_sciences.analysis.</span></span><span class="sig-name descname"><span class="pre">summarise_shift</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">df</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">before_col</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">after_col</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/research_article_political_sciences/analysis.html#summarise_shift"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.research_article_political_sciences.analysis.summarise_shift" title="Link to this definition">¶</a></dt>
<dd><p>Compute summary statistics describing the opinion shift.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>df</strong> (<em>pandas.DataFrame</em>)</p></li>
<li><p><strong>before_col</strong> (<em>str</em>)</p></li>
<li><p><strong>after_col</strong> (<em>str</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Dict</em>[str, float]</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.research_article_political_sciences.analysis.to_numeric">
<span class="sig-prename descclassname"><span class="pre">clean_data.research_article_political_sciences.analysis.</span></span><span class="sig-name descname"><span class="pre">to_numeric</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">series</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/research_article_political_sciences/analysis.html#to_numeric"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.research_article_political_sciences.analysis.to_numeric" title="Link to this definition">¶</a></dt>
<dd><p>Convert a pandas series to numeric values, preserving NaNs.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>series</strong> (<em>pandas.Series</em>)</p>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>pandas.Series</p>
</dd>
</dl>
</dd></dl>

<p id="module-clean_data.research_article_political_sciences.cli">Command-line entry point for the political sciences replication report.</p>
<dl class="py function">
<dt class="sig sig-object py" id="clean_data.research_article_political_sciences.cli.main">
<span class="sig-prename descclassname"><span class="pre">clean_data.research_article_political_sciences.cli.</span></span><span class="sig-name descname"><span class="pre">main</span></span><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/research_article_political_sciences/cli.html#main"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.research_article_political_sciences.cli.main" title="Link to this definition">¶</a></dt>
<dd><p>Entry point used by <code class="docutils literal notranslate"><span class="pre">python</span> <span class="pre">-m</span></code> to run the replication analysis.</p>
<dl class="field-list simple">
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p><em>Dict</em>[str, <em>Any</em>]</p>
</dd>
</dl>
</dd></dl>

<p id="module-clean_data.research_article_political_sciences.markdown">Markdown rendering utilities for the political sciences replication.</p>
<dl class="py function">
<dt class="sig sig-object py" id="clean_data.research_article_political_sciences.markdown.build_markdown">
<span class="sig-prename descclassname"><span class="pre">clean_data.research_article_political_sciences.markdown.</span></span><span class="sig-name descname"><span class="pre">build_markdown</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">output_dir</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">study_rows</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">heatmap_paths</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mean_change_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/research_article_political_sciences/markdown.html#build_markdown"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.research_article_political_sciences.markdown.build_markdown" title="Link to this definition">¶</a></dt>
<dd><p>Render Markdown lines describing the replication results.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>output_dir</strong> (<em>Path</em>)</p></li>
<li><p><strong>study_rows</strong> (<em>Iterable</em><em>[</em><em>Mapping</em><em>[</em><em>str</em><em>, </em><em>object</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>heatmap_paths</strong> (<em>Iterable</em><em>[</em><em>Path</em><em>]</em>)</p></li>
<li><p><strong>mean_change_path</strong> (<em>Path</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>List</em>[str]</p>
</dd>
</dl>
</dd></dl>

<p id="module-clean_data.research_article_political_sciences.plotting">Plotting helpers for the political sciences replication report.</p>
<dl class="py function">
<dt class="sig sig-object py" id="clean_data.research_article_political_sciences.plotting.plot_assignment_panels">
<span class="sig-prename descclassname"><span class="pre">clean_data.research_article_political_sciences.plotting.</span></span><span class="sig-name descname"><span class="pre">plot_assignment_panels</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">study_panels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">regression</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/research_article_political_sciences/plotting.html#plot_assignment_panels"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.research_article_political_sciences.plotting.plot_assignment_panels" title="Link to this definition">¶</a></dt>
<dd><p>Render control/treatment mean-change panels with a regression summary.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>study_panels</strong> (<em>Iterable</em><em>[</em><em>tuple</em><em>[</em><em>str</em><em>, </em><em>Iterable</em><em>[</em><em>Mapping</em><em>[</em><em>str</em><em>, </em><em>float</em><em>]</em><em>]</em><em>]</em><em>]</em>)</p></li>
<li><p><strong>regression</strong> (<em>Mapping</em><em>[</em><em>str</em><em>, </em><em>float</em><em>]</em>)</p></li>
<li><p><strong>output_path</strong> (<em>Path</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="clean_data.research_article_political_sciences.plotting.plot_heatmap">
<span class="sig-prename descclassname"><span class="pre">clean_data.research_article_political_sciences.plotting.</span></span><span class="sig-name descname"><span class="pre">plot_heatmap</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">hist</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">bin_edges</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">title</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/research_article_political_sciences/plotting.html#plot_heatmap"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.research_article_political_sciences.plotting.plot_heatmap" title="Link to this definition">¶</a></dt>
<dd><p>Render a heatmap from a 2D histogram of pre/post opinion indices.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>hist</strong> (<em>numpy.ndarray</em>)</p></li>
<li><p><strong>bin_edges</strong> (<em>numpy.ndarray</em>)</p></li>
<li><p><strong>title</strong> (<em>str</em>)</p></li>
<li><p><strong>output_path</strong> (<em>Path</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p>None</p>
</dd>
</dl>
</dd></dl>

<p id="module-clean_data.research_article_political_sciences.report">Top-level orchestration for the political sciences replication report.</p>
<dl class="py function">
<dt class="sig sig-object py" id="clean_data.research_article_political_sciences.report.generate_research_article_report">
<span class="sig-prename descclassname"><span class="pre">clean_data.research_article_political_sciences.report.</span></span><span class="sig-name descname"><span class="pre">generate_research_article_report</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">dataset</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">output_dir</span></span></em>, <em class="sig-param"><span class="keyword-only-separator o"><abbr title="Keyword-only parameters separator (PEP 3102)"><span class="pre">*</span></abbr></span></em>, <em class="sig-param"><span class="n"><span class="pre">heatmap_bins</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">10</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="../_modules/clean_data/research_article_political_sciences/report.html#generate_research_article_report"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#clean_data.research_article_political_sciences.report.generate_research_article_report" title="Link to this definition">¶</a></dt>
<dd><p>Generate heatmaps and Markdown summarising opinion shifts per study.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>dataset</strong> (<em>datasets.DatasetDict</em>)</p></li>
<li><p><strong>output_dir</strong> (<em>Path</em><em> | </em><em>str</em>)</p></li>
<li><p><strong>heatmap_bins</strong> (<em>int</em>)</p></li>
</ul>
</dd>
<dt class="field-even">Return type<span class="colon">:</span></dt>
<dd class="field-even"><p><em>Dict</em>[str, object]</p>
</dd>
</dl>
</dd></dl>

</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="prompt_builder.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Prompt Builder API</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="../index.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Home</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025, GRAIL Simulation Team
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Clean Data Pipeline</a><ul>
<li><a class="reference internal" href="#module-clean_data">Core Modules</a><ul>
<li><a class="reference internal" href="#clean_data.clean_data.BuildOptions"><code class="docutils literal notranslate"><span class="pre">BuildOptions</span></code></a><ul>
<li><a class="reference internal" href="#clean_data.clean_data.BuildOptions.max_history"><code class="docutils literal notranslate"><span class="pre">BuildOptions.max_history</span></code></a></li>
<li><a class="reference internal" href="#clean_data.clean_data.BuildOptions.sol_key"><code class="docutils literal notranslate"><span class="pre">BuildOptions.sol_key</span></code></a></li>
<li><a class="reference internal" href="#clean_data.clean_data.BuildOptions.system_prompt"><code class="docutils literal notranslate"><span class="pre">BuildOptions.system_prompt</span></code></a></li>
<li><a class="reference internal" href="#clean_data.clean_data.BuildOptions.train_split"><code class="docutils literal notranslate"><span class="pre">BuildOptions.train_split</span></code></a></li>
<li><a class="reference internal" href="#clean_data.clean_data.BuildOptions.validation_ratio"><code class="docutils literal notranslate"><span class="pre">BuildOptions.validation_ratio</span></code></a></li>
<li><a class="reference internal" href="#clean_data.clean_data.BuildOptions.validation_split"><code class="docutils literal notranslate"><span class="pre">BuildOptions.validation_split</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#clean_data.clean_data.build_clean_dataset"><code class="docutils literal notranslate"><span class="pre">build_clean_dataset()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.clean_data.dedupe_by_participant_issue"><code class="docutils literal notranslate"><span class="pre">dedupe_by_participant_issue()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.clean_data.ensure_shared_schema"><code class="docutils literal notranslate"><span class="pre">ensure_shared_schema()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.clean_data.export_issue_datasets"><code class="docutils literal notranslate"><span class="pre">export_issue_datasets()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.clean_data.generate_prompt_stats"><code class="docutils literal notranslate"><span class="pre">generate_prompt_stats()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.clean_data.load_raw"><code class="docutils literal notranslate"><span class="pre">load_raw()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.clean_data.map_rows_to_examples"><code class="docutils literal notranslate"><span class="pre">map_rows_to_examples()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.clean_data.parse_issue_repo_specs"><code class="docutils literal notranslate"><span class="pre">parse_issue_repo_specs()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.clean_data.save_dataset"><code class="docutils literal notranslate"><span class="pre">save_dataset()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.clean_data.validate_required_columns"><code class="docutils literal notranslate"><span class="pre">validate_required_columns()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.cli.main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.cli.parse_args"><code class="docutils literal notranslate"><span class="pre">parse_args()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.codeocean.build_codeocean_rows"><code class="docutils literal notranslate"><span class="pre">build_codeocean_rows()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.codeocean.load_codeocean_dataset"><code class="docutils literal notranslate"><span class="pre">load_codeocean_dataset()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.codeocean.resolve_capsule_data_root"><code class="docutils literal notranslate"><span class="pre">resolve_capsule_data_root()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.codeocean.split_dataframe"><code class="docutils literal notranslate"><span class="pre">split_dataframe()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.filters.compute_issue_counts"><code class="docutils literal notranslate"><span class="pre">compute_issue_counts()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.filters.filter_prompt_ready"><code class="docutils literal notranslate"><span class="pre">filter_prompt_ready()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.io.assign_if_missing"><code class="docutils literal notranslate"><span class="pre">assign_if_missing()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.io.augment_metadata_from_supplemental"><code class="docutils literal notranslate"><span class="pre">augment_metadata_from_supplemental()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.io.fill_metadata_field"><code class="docutils literal notranslate"><span class="pre">fill_metadata_field()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.io.load_recommendation_tree_metadata"><code class="docutils literal notranslate"><span class="pre">load_recommendation_tree_metadata()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.io.load_shorts_sessions"><code class="docutils literal notranslate"><span class="pre">load_shorts_sessions()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.io.load_video_metadata"><code class="docutils literal notranslate"><span class="pre">load_video_metadata()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.io.maybe_literal_eval"><code class="docutils literal notranslate"><span class="pre">maybe_literal_eval()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.io.read_csv_if_exists"><code class="docutils literal notranslate"><span class="pre">read_csv_if_exists()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.io.read_rds_dataframe"><code class="docutils literal notranslate"><span class="pre">read_rds_dataframe()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.io.read_survey_with_fallback"><code class="docutils literal notranslate"><span class="pre">read_survey_with_fallback()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.io.resolve_capsule_data_root"><code class="docutils literal notranslate"><span class="pre">resolve_capsule_data_root()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompting.get_gold_next_id"><code class="docutils literal notranslate"><span class="pre">get_gold_next_id()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompting.gold_index_from_items"><code class="docutils literal notranslate"><span class="pre">gold_index_from_items()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompting.load_slate_items"><code class="docutils literal notranslate"><span class="pre">load_slate_items()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompting.row_to_example"><code class="docutils literal notranslate"><span class="pre">row_to_example()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt_stats.generate_prompt_feature_report"><code class="docutils literal notranslate"><span class="pre">generate_prompt_feature_report()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt_stats.main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.sessions.AllowlistState"><code class="docutils literal notranslate"><span class="pre">AllowlistState</span></code></a><ul>
<li><a class="reference internal" href="#clean_data.sessions.AllowlistState.classify_wage_candidate"><code class="docutils literal notranslate"><span class="pre">AllowlistState.classify_wage_candidate()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.sessions.AllowlistState.from_mapping"><code class="docutils literal notranslate"><span class="pre">AllowlistState.from_mapping()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.sessions.AllowlistState.gun_workers"><code class="docutils literal notranslate"><span class="pre">AllowlistState.gun_workers</span></code></a></li>
<li><a class="reference internal" href="#clean_data.sessions.AllowlistState.requires_enforcement"><code class="docutils literal notranslate"><span class="pre">AllowlistState.requires_enforcement()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.sessions.AllowlistState.wage_study2_urlids"><code class="docutils literal notranslate"><span class="pre">AllowlistState.wage_study2_urlids</span></code></a></li>
<li><a class="reference internal" href="#clean_data.sessions.AllowlistState.wage_study2_workers"><code class="docutils literal notranslate"><span class="pre">AllowlistState.wage_study2_workers</span></code></a></li>
<li><a class="reference internal" href="#clean_data.sessions.AllowlistState.wage_study3_caseids"><code class="docutils literal notranslate"><span class="pre">AllowlistState.wage_study3_caseids</span></code></a></li>
<li><a class="reference internal" href="#clean_data.sessions.AllowlistState.wage_study4_urlids"><code class="docutils literal notranslate"><span class="pre">AllowlistState.wage_study4_urlids</span></code></a></li>
<li><a class="reference internal" href="#clean_data.sessions.AllowlistState.wage_study4_workers"><code class="docutils literal notranslate"><span class="pre">AllowlistState.wage_study4_workers</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#clean_data.sessions.ParticipantIdentifiers"><code class="docutils literal notranslate"><span class="pre">ParticipantIdentifiers</span></code></a><ul>
<li><a class="reference internal" href="#clean_data.sessions.ParticipantIdentifiers.anon_id"><code class="docutils literal notranslate"><span class="pre">ParticipantIdentifiers.anon_id</span></code></a></li>
<li><a class="reference internal" href="#clean_data.sessions.ParticipantIdentifiers.case_id"><code class="docutils literal notranslate"><span class="pre">ParticipantIdentifiers.case_id</span></code></a></li>
<li><a class="reference internal" href="#clean_data.sessions.ParticipantIdentifiers.session_id"><code class="docutils literal notranslate"><span class="pre">ParticipantIdentifiers.session_id</span></code></a></li>
<li><a class="reference internal" href="#clean_data.sessions.ParticipantIdentifiers.urlid"><code class="docutils literal notranslate"><span class="pre">ParticipantIdentifiers.urlid</span></code></a></li>
<li><a class="reference internal" href="#clean_data.sessions.ParticipantIdentifiers.worker_id"><code class="docutils literal notranslate"><span class="pre">ParticipantIdentifiers.worker_id</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#clean_data.sessions.SessionInfo"><code class="docutils literal notranslate"><span class="pre">SessionInfo</span></code></a><ul>
<li><a class="reference internal" href="#clean_data.sessions.SessionInfo.anon_id"><code class="docutils literal notranslate"><span class="pre">SessionInfo.anon_id</span></code></a></li>
<li><a class="reference internal" href="#clean_data.sessions.SessionInfo.session_id"><code class="docutils literal notranslate"><span class="pre">SessionInfo.session_id</span></code></a></li>
<li><a class="reference internal" href="#clean_data.sessions.SessionInfo.topic"><code class="docutils literal notranslate"><span class="pre">SessionInfo.topic</span></code></a></li>
<li><a class="reference internal" href="#clean_data.sessions.SessionInfo.trajectory_json"><code class="docutils literal notranslate"><span class="pre">SessionInfo.trajectory_json</span></code></a></li>
<li><a class="reference internal" href="#clean_data.sessions.SessionInfo.urlid"><code class="docutils literal notranslate"><span class="pre">SessionInfo.urlid</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#clean_data.sessions.SessionTiming"><code class="docutils literal notranslate"><span class="pre">SessionTiming</span></code></a><ul>
<li><a class="reference internal" href="#clean_data.sessions.SessionTiming.delay"><code class="docutils literal notranslate"><span class="pre">SessionTiming.delay</span></code></a></li>
<li><a class="reference internal" href="#clean_data.sessions.SessionTiming.end"><code class="docutils literal notranslate"><span class="pre">SessionTiming.end</span></code></a></li>
<li><a class="reference internal" href="#clean_data.sessions.SessionTiming.start"><code class="docutils literal notranslate"><span class="pre">SessionTiming.start</span></code></a></li>
<li><a class="reference internal" href="#clean_data.sessions.SessionTiming.total"><code class="docutils literal notranslate"><span class="pre">SessionTiming.total</span></code></a></li>
<li><a class="reference internal" href="#clean_data.sessions.SessionTiming.watch"><code class="docutils literal notranslate"><span class="pre">SessionTiming.watch</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#clean_data.sessions.build_codeocean_rows"><code class="docutils literal notranslate"><span class="pre">build_codeocean_rows()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.sessions.build_slate_items"><code class="docutils literal notranslate"><span class="pre">build_slate_items()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.sessions.coerce_session_value"><code class="docutils literal notranslate"><span class="pre">coerce_session_value()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.sessions.derive_next_from_history"><code class="docutils literal notranslate"><span class="pre">derive_next_from_history()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.sessions.get_gold_next_id"><code class="docutils literal notranslate"><span class="pre">get_gold_next_id()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.sessions.gold_index_from_items"><code class="docutils literal notranslate"><span class="pre">gold_index_from_items()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.sessions.load_slate_items"><code class="docutils literal notranslate"><span class="pre">load_slate_items()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.sessions.lookup_session_value"><code class="docutils literal notranslate"><span class="pre">lookup_session_value()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.sessions.normalize_display_orders"><code class="docutils literal notranslate"><span class="pre">normalize_display_orders()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.sessions.normalize_session_mapping"><code class="docutils literal notranslate"><span class="pre">normalize_session_mapping()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.sessions.participant_key"><code class="docutils literal notranslate"><span class="pre">participant_key()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.sessions.split_dataframe"><code class="docutils literal notranslate"><span class="pre">split_dataframe()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.surveys.build_survey_index"><code class="docutils literal notranslate"><span class="pre">build_survey_index()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.surveys.infer_issue_from_topic"><code class="docutils literal notranslate"><span class="pre">infer_issue_from_topic()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.surveys.infer_participant_study"><code class="docutils literal notranslate"><span class="pre">infer_participant_study()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.surveys.load_participant_allowlists"><code class="docutils literal notranslate"><span class="pre">load_participant_allowlists()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.surveys.select_survey_row"><code class="docutils literal notranslate"><span class="pre">select_survey_row()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-clean_data.prompt">Prompt Utilities</a><ul>
<li><a class="reference internal" href="#clean_data.prompt.generate_prompt_feature_report"><code class="docutils literal notranslate"><span class="pre">generate_prompt_feature_report()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.cli.generate_prompt_feature_report"><code class="docutils literal notranslate"><span class="pre">generate_prompt_feature_report()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.cli.main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.markdown.ReportContext"><code class="docutils literal notranslate"><span class="pre">ReportContext</span></code></a><ul>
<li><a class="reference internal" href="#clean_data.prompt.markdown.ReportContext.figures"><code class="docutils literal notranslate"><span class="pre">ReportContext.figures</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.markdown.ReportContext.figures_dir"><code class="docutils literal notranslate"><span class="pre">ReportContext.figures_dir</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.markdown.ReportContext.output_dir"><code class="docutils literal notranslate"><span class="pre">ReportContext.output_dir</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.markdown.ReportContext.summaries"><code class="docutils literal notranslate"><span class="pre">ReportContext.summaries</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#clean_data.prompt.markdown.ReportCounts"><code class="docutils literal notranslate"><span class="pre">ReportCounts</span></code></a><ul>
<li><a class="reference internal" href="#clean_data.prompt.markdown.ReportCounts.demographic_missing"><code class="docutils literal notranslate"><span class="pre">ReportCounts.demographic_missing</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.markdown.ReportCounts.n_options"><code class="docutils literal notranslate"><span class="pre">ReportCounts.n_options</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.markdown.ReportCounts.participant"><code class="docutils literal notranslate"><span class="pre">ReportCounts.participant</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.markdown.ReportCounts.prior_history"><code class="docutils literal notranslate"><span class="pre">ReportCounts.prior_history</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.markdown.ReportCounts.unique_content"><code class="docutils literal notranslate"><span class="pre">ReportCounts.unique_content</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#clean_data.prompt.markdown.ReportFigures"><code class="docutils literal notranslate"><span class="pre">ReportFigures</span></code></a><ul>
<li><a class="reference internal" href="#clean_data.prompt.markdown.ReportFigures.demographic"><code class="docutils literal notranslate"><span class="pre">ReportFigures.demographic</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.markdown.ReportFigures.n_options"><code class="docutils literal notranslate"><span class="pre">ReportFigures.n_options</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.markdown.ReportFigures.prior_history"><code class="docutils literal notranslate"><span class="pre">ReportFigures.prior_history</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#clean_data.prompt.markdown.ReportSummaries"><code class="docutils literal notranslate"><span class="pre">ReportSummaries</span></code></a><ul>
<li><a class="reference internal" href="#clean_data.prompt.markdown.ReportSummaries.counts"><code class="docutils literal notranslate"><span class="pre">ReportSummaries.counts</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.markdown.ReportSummaries.coverage"><code class="docutils literal notranslate"><span class="pre">ReportSummaries.coverage</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.markdown.ReportSummaries.feature"><code class="docutils literal notranslate"><span class="pre">ReportSummaries.feature</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.markdown.ReportSummaries.profile"><code class="docutils literal notranslate"><span class="pre">ReportSummaries.profile</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.markdown.ReportSummaries.skipped_features"><code class="docutils literal notranslate"><span class="pre">ReportSummaries.skipped_features</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#clean_data.prompt.markdown.build_markdown_report"><code class="docutils literal notranslate"><span class="pre">build_markdown_report()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.plotting.plot_categorical_hist"><code class="docutils literal notranslate"><span class="pre">plot_categorical_hist()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.plotting.plot_categorical_hist_by_issue"><code class="docutils literal notranslate"><span class="pre">plot_categorical_hist_by_issue()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.plotting.plot_numeric_hist"><code class="docutils literal notranslate"><span class="pre">plot_numeric_hist()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.plotting.plot_numeric_hist_by_issue"><code class="docutils literal notranslate"><span class="pre">plot_numeric_hist_by_issue()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.summary.demographic_missing_summary"><code class="docutils literal notranslate"><span class="pre">demographic_missing_summary()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.summary.n_options_summary"><code class="docutils literal notranslate"><span class="pre">n_options_summary()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.summary.participant_counts_summary"><code class="docutils literal notranslate"><span class="pre">participant_counts_summary()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.summary.prior_history_summary"><code class="docutils literal notranslate"><span class="pre">prior_history_summary()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.summary.profile_summary"><code class="docutils literal notranslate"><span class="pre">profile_summary()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.summary.summarize_feature"><code class="docutils literal notranslate"><span class="pre">summarize_feature()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.summary.summarize_features"><code class="docutils literal notranslate"><span class="pre">summarize_features()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.summary.unique_content_counts"><code class="docutils literal notranslate"><span class="pre">unique_content_counts()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.utils.SeriesPair"><code class="docutils literal notranslate"><span class="pre">SeriesPair</span></code></a><ul>
<li><a class="reference internal" href="#clean_data.prompt.utils.SeriesPair.has_issue"><code class="docutils literal notranslate"><span class="pre">SeriesPair.has_issue()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.utils.SeriesPair.issue_names"><code class="docutils literal notranslate"><span class="pre">SeriesPair.issue_names()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.utils.SeriesPair.split_by_issue"><code class="docutils literal notranslate"><span class="pre">SeriesPair.split_by_issue()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.utils.SeriesPair.train_df"><code class="docutils literal notranslate"><span class="pre">SeriesPair.train_df</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.utils.SeriesPair.train_series"><code class="docutils literal notranslate"><span class="pre">SeriesPair.train_series</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.utils.SeriesPair.val_df"><code class="docutils literal notranslate"><span class="pre">SeriesPair.val_df</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.utils.SeriesPair.val_series"><code class="docutils literal notranslate"><span class="pre">SeriesPair.val_series</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#clean_data.prompt.utils.canonical_slate_items"><code class="docutils literal notranslate"><span class="pre">canonical_slate_items()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.utils.categorical_summary"><code class="docutils literal notranslate"><span class="pre">categorical_summary()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.utils.clean_viewer_profile"><code class="docutils literal notranslate"><span class="pre">clean_viewer_profile()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.utils.convert_numeric"><code class="docutils literal notranslate"><span class="pre">convert_numeric()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.utils.core_prompt_mask"><code class="docutils literal notranslate"><span class="pre">core_prompt_mask()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.utils.count_prior_history"><code class="docutils literal notranslate"><span class="pre">count_prior_history()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.utils.dedupe_participants"><code class="docutils literal notranslate"><span class="pre">dedupe_participants()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.utils.ensure_dir"><code class="docutils literal notranslate"><span class="pre">ensure_dir()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.utils.feature_label"><code class="docutils literal notranslate"><span class="pre">feature_label()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.utils.filter_core_prompt_rows"><code class="docutils literal notranslate"><span class="pre">filter_core_prompt_rows()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.utils.first_present"><code class="docutils literal notranslate"><span class="pre">first_present()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.utils.is_nanlike"><code class="docutils literal notranslate"><span class="pre">is_nanlike()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.utils.load_dataset_any"><code class="docutils literal notranslate"><span class="pre">load_dataset_any()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.utils.non_missing"><code class="docutils literal notranslate"><span class="pre">non_missing()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.utils.numeric_summary"><code class="docutils literal notranslate"><span class="pre">numeric_summary()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.utils.participant_ids"><code class="docutils literal notranslate"><span class="pre">participant_ids()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.utils.participant_stats"><code class="docutils literal notranslate"><span class="pre">participant_stats()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.prompt.utils.series_from_columns"><code class="docutils literal notranslate"><span class="pre">series_from_columns()</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#module-clean_data.research_article_political_sciences">Research Article Replication</a><ul>
<li><a class="reference internal" href="#clean_data.research_article_political_sciences.generate_research_article_report"><code class="docutils literal notranslate"><span class="pre">generate_research_article_report()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.research_article_political_sciences.analysis.StudySpec"><code class="docutils literal notranslate"><span class="pre">StudySpec</span></code></a><ul>
<li><a class="reference internal" href="#clean_data.research_article_political_sciences.analysis.StudySpec.after_column"><code class="docutils literal notranslate"><span class="pre">StudySpec.after_column</span></code></a></li>
<li><a class="reference internal" href="#clean_data.research_article_political_sciences.analysis.StudySpec.before_column"><code class="docutils literal notranslate"><span class="pre">StudySpec.before_column</span></code></a></li>
<li><a class="reference internal" href="#clean_data.research_article_political_sciences.analysis.StudySpec.heatmap_filename"><code class="docutils literal notranslate"><span class="pre">StudySpec.heatmap_filename</span></code></a></li>
<li><a class="reference internal" href="#clean_data.research_article_political_sciences.analysis.StudySpec.issue"><code class="docutils literal notranslate"><span class="pre">StudySpec.issue</span></code></a></li>
<li><a class="reference internal" href="#clean_data.research_article_political_sciences.analysis.StudySpec.key"><code class="docutils literal notranslate"><span class="pre">StudySpec.key</span></code></a></li>
<li><a class="reference internal" href="#clean_data.research_article_political_sciences.analysis.StudySpec.label"><code class="docutils literal notranslate"><span class="pre">StudySpec.label</span></code></a></li>
</ul>
</li>
<li><a class="reference internal" href="#clean_data.research_article_political_sciences.analysis.assemble_study_specs"><code class="docutils literal notranslate"><span class="pre">assemble_study_specs()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.research_article_political_sciences.analysis.compute_treatment_regression"><code class="docutils literal notranslate"><span class="pre">compute_treatment_regression()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.research_article_political_sciences.analysis.dataframe_from_splits"><code class="docutils literal notranslate"><span class="pre">dataframe_from_splits()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.research_article_political_sciences.analysis.histogram2d_counts"><code class="docutils literal notranslate"><span class="pre">histogram2d_counts()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.research_article_political_sciences.analysis.load_assignment_frame"><code class="docutils literal notranslate"><span class="pre">load_assignment_frame()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.research_article_political_sciences.analysis.prepare_study_frame"><code class="docutils literal notranslate"><span class="pre">prepare_study_frame()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.research_article_political_sciences.analysis.summarise_assignments"><code class="docutils literal notranslate"><span class="pre">summarise_assignments()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.research_article_political_sciences.analysis.summarise_shift"><code class="docutils literal notranslate"><span class="pre">summarise_shift()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.research_article_political_sciences.analysis.to_numeric"><code class="docutils literal notranslate"><span class="pre">to_numeric()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.research_article_political_sciences.cli.main"><code class="docutils literal notranslate"><span class="pre">main()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.research_article_political_sciences.markdown.build_markdown"><code class="docutils literal notranslate"><span class="pre">build_markdown()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.research_article_political_sciences.plotting.plot_assignment_panels"><code class="docutils literal notranslate"><span class="pre">plot_assignment_panels()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.research_article_political_sciences.plotting.plot_heatmap"><code class="docutils literal notranslate"><span class="pre">plot_heatmap()</span></code></a></li>
<li><a class="reference internal" href="#clean_data.research_article_political_sciences.report.generate_research_article_report"><code class="docutils literal notranslate"><span class="pre">generate_research_article_report()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/furo.js?v=46bd48cc"></script>
    </body>
</html>